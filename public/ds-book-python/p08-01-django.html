<!DOCTYPE html>
<html class="writer-html5" lang="vn" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Xây dựng website với Django &mdash; Phân tích dữ liệu với Python 2019 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=1ea3fed6"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Phân tích dữ liệu với Python
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Python cơ bản</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p01-01-intro-jupyter-notebook.html">1. Giới thiệu về Python và Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-02-gioi-thieu-co-ban-python.html">2. Các cấu trúc cơ bản trong Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-03-numpy.html">3. Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-05-pandas.html">4. Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-06-datetime.html">5. Dữ liệu thời gian trong Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-07-lam-viec-voi-text.html">6. Biến đổi dữ liệu text trong python</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-08-matplotlib.html">7. Trực quan hóa với Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-08-matplotlib.html#Sử-dụng-style-plot">8. Sử dụng style plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-09-seaborn.html">9. Trực quan hóa với Seaborn</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-10-ngu-phap-bieu-do.html">10. Ngữ pháp của biểu đồ</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-13-lam-viec-voi-files.html">11. Làm việc với các file trong máy tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-19-so-sanh-python-r.html">12. So sánh R với Python cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p01-99-tricks-python.html">13. Các mẹo trong Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine learning với sklearn</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p02-01-sklearn.html">1. Giới thiệu cơ bản về Scikit learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-02-sklearn-advanced.html">2. sklearn nâng cao</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-03-xgboost.html">3. Xgboost với sklearn</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-07-machine-learning-h2o.html">4. Machine learning với <code class="docutils literal notranslate"><span class="pre">H2O</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-20-api-flask.html">5. Xây dựng API dự báo với Flask</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lập trình trong Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p06-01-lap-trinh-doi-tuong-python.html">1. Lập trình hướng - đối tượng với Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Xây dựng Python package</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p07-01-functions-in-python.html">1. Viết hàm trong Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Case studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p09-01-data-exploration-case-study.html">1. Ví dụ phân tích với pandas và matplotlib</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Phân tích dữ liệu với Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Xây dựng website với Django</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/p08-01-django.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Xây-dựng-website-với-Django">
<h1>Xây dựng website với Django<a class="headerlink" href="#Xây-dựng-website-với-Django" title="Link to this heading"></a></h1>
<section id="Tổng-quan-Django">
<h2>Tổng quan Django<a class="headerlink" href="#Tổng-quan-Django" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Django</span></code> là một framework cho phép xây dựng website có backend nhanh chóng. Cấu phần của Django được sử dụng để giải quyết 3 phần:</p>
<ul class="simple">
<li><p>Phần 1: Làm việc với database và data</p></li>
<li><p>Phần 2: Làm việc với các template (html template, css)</p></li>
<li><p>Phần 3: Làm việc xử lý truyền tải thông tin giữa end-user và database</p></li>
</ul>
<p>Các cấu phần trên được mô tả qua sơ đồ sau:</p>
<img alt="_images/django-01.png" src="_images/django-01.png" />
<p><strong>Cấu trúc cơ bản project của Django</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>django-project/
<span class="w">    </span>env_mysite/
<span class="w">    </span>mangage.py
<span class="w">    </span>db.sqlite3
<span class="w">    </span>my-site/
<span class="w">        </span>__init__.py
<span class="w">        </span>settings.py
<span class="w">        </span>urls.py
<span class="w">        </span>asgi.py
<span class="w">        </span>wsgi.py
<span class="w">    </span>app1/
<span class="w">    </span>app2/
</pre></div>
</div>
<hr class="docutils" />
<p>Các files trong project:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">env_mysite</span></code>: Virtual environment của project. Các package được sử dụng cho <code class="docutils literal notranslate"><span class="pre">django</span></code> sẽ được cài đặt ở đây, tách biệt với cả môi trường độc lập trong <code class="docutils literal notranslate"><span class="pre">global</span> <span class="pre">environment</span></code>, giúp dễ dàng cho việc deploy và quản lý.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">manage.py</span></code>: Các command-line cho phép làm việc với project</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">db.sqlite3</span></code>: Database của website</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">my-site</span></code> folder: Python package cho website</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>: Cấu trúc file cho phép sử dụng folder như là 1 package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">settings.py</span></code>: Các settings trong project, bao gồm cả các app đã được cài sẵn trong module của <code class="docutils literal notranslate"><span class="pre">django</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">urls.py</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asgi.py</span></code>:</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">app1</span></code>, <code class="docutils literal notranslate"><span class="pre">app2</span></code>: Các package riêng, phục vụ 1 chức năng nhất định do người dùng tạo thêm. Trong file <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> của <code class="docutils literal notranslate"><span class="pre">my-site</span></code> cũng đã có nhiều app được cài sẵn. Ví dụ</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my</span><span class="o">-</span><span class="n">site</span>\<span class="n">settings</span><span class="o">.</span><span class="n">py</span>

<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>Cấu trúc trong app</strong>: Ví dụ trong app <code class="docutils literal notranslate"><span class="pre">polls</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>polls/
<span class="w">    </span>__init__.py
<span class="w">    </span>admin.py
<span class="w">    </span>apps.py
<span class="w">    </span>migrations/
<span class="w">        </span>__init__.py
<span class="w">    </span>models.py
<span class="w">    </span>tests.py
<span class="w">    </span>views.py
</pre></div>
</div>
</section>
<section id="Model">
<h2>Model<a class="headerlink" href="#Model" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Model</span></code> là các đối tượng được khai báo trong Django, quyết định cấu trúc của <code class="docutils literal notranslate"><span class="pre">database</span></code>. Model chính là các đối tượng cần được khai báo để thay đổi, hiển thị từ tầng người dùng.</p>
<p>Ví dụ model trong app được khai báo như sau:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Question</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s1">&#39;date published&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Choice</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Question</span><span class="p">,</span> <span class="n">on_delete</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">choice_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
    <span class="n">votes</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Models sau khi được khai báo, cần phải được cài đặt trong settings của project. Ví dụ với app <code class="docutils literal notranslate"><span class="pre">polls</span></code>, cần cài đặt thêm như sau:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;polls.apps.PollsConfig&#39;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Sau khi khai báo models xong, cần phải migrate sang database như sau:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span> <span class="n">polls</span>
</pre></div>
</div>
<p>Sau khi migrate xong sẽ có kết quả như sau</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Migrations for &#39;polls&#39;:
  polls/migrations/0001_initial.py
    - Create model Question
    - Create model Choice
</pre></div>
</div>
<p>Sau khi migrate xong, trong thư mục <code class="docutils literal notranslate"><span class="pre">migrations</span></code> trong app sẽ xuất hiện file mới là <code class="docutils literal notranslate"><span class="pre">0001_initial.py</span></code></p>
<p><strong>Lưu ý</strong>: <code class="docutils literal notranslate"><span class="pre">makemigrations</span></code> là câu lệnh thông báo rằng model có sự thay đổi. Câu lệnh này sẽ thay đổi <em>cấu trúc</em> của database mà thôi (không thay đổi content)</p>
<p>Kiểm tra cấu trúc dữ liệu mà database tạo ra:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">sqlmigrate</span> <span class="n">polls</span> <span class="mi">0001</span>
</pre></div>
</div>
</section>
<section id="Các-câu-lệnh-cơ-bản">
<h2>Các câu lệnh cơ bản<a class="headerlink" href="#Các-câu-lệnh-cơ-bản" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Start project: <code class="docutils literal notranslate"><span class="pre">django-admin</span> <span class="pre">startproject</span> <span class="pre">name-of-project</span></code></p></li>
<li><p>Run server: <code class="docutils literal notranslate"><span class="pre">pyhon</span> <span class="pre">manage.py</span> <span class="pre">runserver</span></code></p></li>
<li><p>Create app: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">startapp</span> <span class="pre">name-of-app</span></code></p></li>
<li><p>Migrate db - tạo cấu trúc db: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">makemigrations</span> <span class="pre">polls</span></code></p></li>
<li><p>Create db: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">migrate</span></code></p></li>
<li><p>Tạo admin user: <code class="docutils literal notranslate"><span class="pre">winpty</span> <span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">createsuperuser</span></code></p></li>
</ul>
<p>Câu lệnh <code class="docutils literal notranslate"><span class="pre">migrate</span></code> cho phép <code class="docutils literal notranslate"><span class="pre">python</span></code> kiểm tra hết cấu phần <code class="docutils literal notranslate"><span class="pre">settings.py</span></code>, và tạo <code class="docutils literal notranslate"><span class="pre">database</span></code></p>
<p><strong>Tài liệu tham khảo</strong>:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://djangobook.com/mdj2-django-structure/">https://djangobook.com/mdj2-django-structure/</a></p></li>
<li><p><a class="reference external" href="https://docs.djangoproject.com/en/3.2/intro/tutorial01/">https://docs.djangoproject.com/en/3.2/intro/tutorial01/</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Anh Hoang Duc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>