{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Làm việc với các file trong máy tính"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "`Python` rất mạnh trong việc xử lý các vấn đề liên quan đến các file trong máy tính. Hai thư viện được dùng nhiều khi xử lý các file trong máy tính là `glob` và `os`"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "import os, glob"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Liệt kê các file theo định dạng"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['boxplot.png',\n",
       " 'chart.png',\n",
       " 'my_figure.png',\n",
       " 'seaborn_chart.png',\n",
       " 'conf.py',\n",
       " 'my_functions.py']"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "file_name = []\n",
    "for extension in ['*.png', '*.py']:\n",
    "    file_name = file_name + glob.glob(extension)\n",
    "file_name"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Chèn thêm prefix vào tất cả file_name"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "def change_name(file_extension=['*.PNG', '*.JPG', '*.JPEG'], prefix='test'):\n",
    "    \"\"\"\n",
    "    Function to add a prefix in name of files within a folder. It will help organizing files better, \n",
    "    especially Images for markdown files without changing much in source code.\n",
    "    \"\"\"\n",
    "    import re, glob, os\n",
    "    import numpy as np\n",
    "    file_name_full = []\n",
    "    for ext in file_extension:\n",
    "        file_name_full = file_name_full + glob.glob(ext)\n",
    "    file_name = []\n",
    "    extension = []\n",
    "    for file in file_name_full:\n",
    "        file_name = file_name + [os.path.splitext(file)[0]]\n",
    "        extension = extension + [os.path.splitext(file)[1]]\n",
    "    extension = np.array(extension)\n",
    "    file_name = np.array(file_name)\n",
    "    # New name, adding prefix\n",
    "    new_name = [prefix + str(file) + str(ext) for file, ext in zip(file_name, extension)]\n",
    "    print(new_name)\n",
    "    # Rename\n",
    "#    [os.rename(old_name, new_name) for old_name, new_name in zip(file_name_full, new_name)]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "['hello-boxplot.png', 'hello-chart.png', 'hello-my_figure.png', 'hello-seaborn_chart.png']\n"
     ]
    }
   ],
   "source": [
    "change_name(prefix = \"hello-\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Rename 1 file"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```python\n",
    "[os.rename(old_name, new_name) for old_name, new_name in zip(file_name_full, new_name)]\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Mở 1 file text, thay đổi và save"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```python\n",
    "file = \"my_file.txt\"\n",
    "import re\n",
    "with open(file, encoding=\"utf8\") as f:\n",
    "    s = f.read() # Read content của file f, lưu thành s\n",
    "    s = s.strip() # Remove khoảng trắng đầu và cuối\n",
    "with open(file,'w', encoding=\"utf8\") as f:\n",
    "    f.write(s)  # Ghi nội dung của file f dưới dạng s\n",
    "```"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.1"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
