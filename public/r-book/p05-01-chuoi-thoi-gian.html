

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="vi" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="vi" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Giới thiệu về chuỗi thời gian &mdash; Tài liệu Phân tích dữ liệu với R 2019</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2019',
              LANGUAGE:'vi',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Tìm Kiếm" href="search.html" />
    <link rel="next" title="2. Mô hình ARIMA" href="p05-02-arima.html" />
    <link rel="prev" title="6. Phân tích nhân tố ẩn (factor analysis)" href="p04-06-factor-analysis.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Phân tích dữ liệu với R
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Giới thiệu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p01-01-gioi-thieu.html">Khoa học dữ liệu và nghề phân tích dữ liệu</a></li>
</ul>
<p class="caption"><span class="caption-text">Phân tích khám phá dữ liệu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p02-03-bien-doi-du-lieu-dplyr.html">1. Ngữ pháp của biến đổi dữ liệu với DPLYR</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-04-phan-ra-va-xoay-chieu-du-lieu.html">2. Phân rã và xoay chiều dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-05-cac-chi-so-thong-ke.html">3. Các chỉ số thống kê mô tả cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-06-lap-trinh-ham.html">4. Lập trình hàm</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-07-lap-trinh-ham-voi-purrr.html">5. Lập trình chức năng hàm với purrr</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-08-bien-doi-du-lieu-text.html">6. Biến đổi dữ liệu text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-11-quan-ly-nhieu-mo-hinh.html">7. Quản lý kết quả phân tích từ nhiều mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-15-thong-ke-co-ban.html">8. Xác suất và phân phối thống kê cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-16-power-analysis.html">9. Power analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-20-sampling-methods.html">10. Phương pháp ước lượng lấy mẫu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-50-datatable.html">11. Biến đổi dữ liệu với <code class="docutils literal notranslate"><span class="pre">data.table</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-60-thu-thap-du-lieu-tu-website.html">12. Thu thập dữ liệu từ website</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-99-meo-trong-r.html">13. Các mẹo trong R</a></li>
</ul>
<p class="caption"><span class="caption-text">Supervised learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p03-01-nguyen-ly-du-bao.html">1. Các nguyên lý dự báo</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-02-mo-hinh-ols.html">2. Mô hình OLS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-03-logistic-regression.html">3. Mô hình hồi quy logistic</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-04-decision-tree.html">4. Cây quyết định</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-05-bagging-boosting.html">5. Bagging, RandomForest và Boosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-07-xay-dung-mo-hinh-voi-h2o.html">6. Xây dựng mô hình với H2O</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-08-svm.html">7. Support Vector Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-09-feature-engineering.html">8. Feature Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-15-regularization.html">9. Regularization</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-17-nonlinear.html">10. Mô hình phi tuyến tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-30-credit-scoring.html">11. Credit Scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-35-caret.html">12. Xây dựng mô hình dự báo với caret</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-65-chat-luong-mo-hinh.html">13. Chất lượng mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-70-tidymodels.html">14. Tidymodels</a></li>
</ul>
<p class="caption"><span class="caption-text">Unsupervised learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p04-01-unsupervised-learning.html">1. Unsupervised learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-02-kmeans.html">2. k-means</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-03-hierarchical-clustering.html">3. Hierachical clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-04-basket-analysis.html">4. Phân tích giỏ hàng</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-05-pca.html">5. Principal component analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-06-factor-analysis.html">6. Phân tích nhân tố ẩn (factor analysis)</a></li>
</ul>
<p class="caption"><span class="caption-text">Chuỗi thời gian</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Giới thiệu về chuỗi thời gian</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#thanh-phan-cua-chuoi-thoi-gian">1.1. Thành phần của chuỗi thời gian</a></li>
<li class="toctree-l2"><a class="reference internal" href="#du-lieu-chuoi-thoi-gian">1.2. Dữ liệu chuỗi thời gian</a></li>
<li class="toctree-l2"><a class="reference internal" href="#smoothing">1.3. Smoothing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#seasonal-decomposition">1.4. Seasonal decomposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exponential-forecasting-model">1.5. Exponential Forecasting Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#single-exponential-model">1.5.1. Single Exponential Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hold-holt-winters-exponential-smoothing">1.5.2. Hold &amp; Holt-Winters exponential smoothing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tu-dong-xay-dung-mo-hinh">1.5.3. Tự động xây dựng mô hình</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="p05-02-arima.html">2. Mô hình ARIMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant.html">3. Phân tích chuỗi thời gian với tidyquant và timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-06-du-bao-ts-voi-prophet.html">4. Dự báo chuỗi thời gian với prophet</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-07-du-bao-ts-voi-timetk.html">5. Dự báo chuỗi thời gian với timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-08-abnomaly-detection.html">6. Abnomaly detection trong times series</a></li>
</ul>
<p class="caption"><span class="caption-text">Ngôn ngữ tự nghiên</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p06-01-nlp-co-ban.html">1. Xử lý ngôn ngữ tự nhiên cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-04-text-classification.html">2. Phân loại text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-07-nlp-api.html">3. Sử dụng API từ các dịch vụ đám mây</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-10-ocr-tesseract.html">4. OCR với <code class="docutils literal notranslate"><span class="pre">tesseract</span></code></a></li>
</ul>
<p class="caption"><span class="caption-text">Các phương pháp khác</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p07-01-survival-analysis.html">1. Survival analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-02-causal-impact.html">2. Causal Impact</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-03-collaborative-filtering.html">3. Collaborative Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-07-spatial-data.html">4. Spatial data</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-10-shiny.html">5. Shiny apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Deep Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p09-01-gioi-thieu-deep-learning.html">1. Giới thiệu cơ bản về Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-02-co-ban-kien-thuc-toan.html">2. Kiến thức cơ bản toán học cho deep learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-03-mo-hinh-deep-learning-co-ban.html">3. Mô hình deep learning cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-04-convolution-neural-network.html">4. Convolution neural networks</a></li>
</ul>
<p class="caption"><span class="caption-text">Cloud Computing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p10-01-cai-dat-rstudio-server-tren-amazon.html">1. Cài đặt server RStudio trên Amazon</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-03-web-service-azure.html">2. Xây dựng web service với Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-09-apis-voi-plumber.html">3. API với Plumber</a></li>
</ul>
<p class="caption"><span class="caption-text">Kiến thức bổ trợ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p11-01-git.html">1. Sử dụng GIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-02-cmd.html">2. CMD và Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-03-docker.html">3. Sử dụng docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-04-apis.html">4. API</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-05-html-css.html">5. Cơ bản về HTML và CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-09-other.html">6. Các tricks khác</a></li>
</ul>
<p class="caption"><span class="caption-text">Case studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p13-01-casestudy-truc-quan-hoa.html">1. Trực quan hóa dữ liệu</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Phân tích dữ liệu với R</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>1. Giới thiệu về chuỗi thời gian</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/p05-01-chuoi-thoi-gian.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="gioi-thieu-ve-chuoi-thoi-gian">
<h1>1. Giới thiệu về chuỗi thời gian<a class="headerlink" href="#gioi-thieu-ve-chuoi-thoi-gian" title="Permalink to this headline">¶</a></h1>
<p>Khi phân tích dữ liệu, có hai khái niệm đều được gọi là <em>dự báo</em> khi
được dịch sang tiếng Việt, đó là <code class="docutils literal notranslate"><span class="pre">forcast</span></code> và <code class="docutils literal notranslate"><span class="pre">predict</span></code>. Tuy nhiên,
hai khái niệm này rất khác nhau.</p>
<ul class="simple">
<li><strong>Predict</strong>: Thường được dùng để chỉ việc dự báo xác suất xảy ra các
sự kiện. Ví dụ, xác suất vỡ nợ, xác suất khách hàng churn,…</li>
<li><strong>Forecast</strong>: Thường dùng trong việc dự báo chuỗi thời gian. Ví dụ,
dựa vào lịch sử biến động của tổng khách hàng uống cafe theo tuần, ta
có thể <em>dự báo</em> được số lượng khách hàng uống cafe của 1 tuần tới,
hai tuần tới,…</li>
</ul>
<p>Trong phần trước, chúng ta đã bàn nhiều về nhóm <code class="docutils literal notranslate"><span class="pre">predict</span></code>, trong phần
này, ta sẽ bàn thêm về nhóm <code class="docutils literal notranslate"><span class="pre">forecast</span></code>, về các cấu phần và cách thức
dự báo đối với chuỗi thời gian. Do đó, trong phần này, khi nói về dự
báo, chúng ta đang bàn về vấn đề <code class="docutils literal notranslate"><span class="pre">forecast</span></code>.</p>
<p><strong>Phân biệt ``dự báo``, ``mục tiêu`` và ``kế hoạch``</strong></p>
<p><strong>Dự báo</strong>: là quá trình sử dụng các thông tin hiện hữu đưa ra các nhận
định chính xác nhất có thể có trong tương lai trong một khoảng thời gian
xác định về một chỉ số nào đó.</p>
<p><strong>Mục tiêu</strong>: là thứ mà cá nhân, tổ chức mong muốn đạt được trong một
khoảng thời gian xác định trong tương lai. Thường thì mục tiêu được đặt
mà không quan tâm đến bất kỳ đến việc dự báo nào cả. Ví dụ, mục tiêu
tăng trưởng của doanh nghiệp thường là năm sau cao gấp đôi năm trước
trong khi dự báo chỉ có thể tăng được 30%.</p>
<p><strong>Kế hoạch</strong>: Là phản ứng của tổ chức, cá nhân đối với <em>dự báo</em> và <em>mục
tiêu</em>. Việc lập kế hoạch đòi hỏi nhiều hành động cụ thể để điều hướng dự
báo sát sát với mục tiêu (hoặc vượt mục tiêu)</p>
<p>Xét về yếu tố thời gian, việc dự báo có thể chia thành dự báo ngắn hạn,
trung hạn và dài hạn.</p>
<p><strong>Các điểm khi dự báo</strong></p>
<p>Khi dự báo, có hai điểm quan trọng chúng ta phải trả lời.</p>
<ul class="simple">
<li>Thứ nhất, ta cần dự báo điều gì? Dự báo với từng sản phẩm hay với cả
nhóm sản phẩm? Dự báo doanh số bán hàng của từng cửa hàng hay của
toàn hệ thống?</li>
<li>Thứ hai, yếu tố thời gian xét trong vấn đề dự báo này là gì? Ta cần
dự báo trong bao lâu? Tần xuất như thế nào? Ví dụ, dư báo doanh số
bán hàng mỗi tháng/tuần 1 lần trong 1 năm tới?</li>
</ul>
<blockquote>
<div><strong>Lưu ý</strong>: Các bạn phân tích dữ liệu cần phải tìm hiểu các đơn vị
nghiệp vụ sẽ sử dụng kết quả dự báo như thế nào, để tránh việc bỏ quá
nhiều thời gian và công sức dự báo nhưng không ai sử dụng.</div></blockquote>
<div class="section" id="thanh-phan-cua-chuoi-thoi-gian">
<h2>1.1. Thành phần của chuỗi thời gian<a class="headerlink" href="#thanh-phan-cua-chuoi-thoi-gian" title="Permalink to this headline">¶</a></h2>
<p>Trong bất cứ chuỗi thời gian nào, cũng có 3 thành phần sau.</p>
<ul class="simple">
<li><strong>Xu hướng</strong> (trend) thể hiện chiều hướng tăng hay giảm dài hạn của
chuỗi thời gian</li>
<li><strong>Mùa vụ</strong> (seasonal) thể hiện sự biến đổi của chuỗi thời gian theo
chu kỳ biết trước. Ví dụ, vào cuối tuần, khách hàng có xu hướng đi ăn
nhà hàng nhiều hơn.</li>
<li><strong>Chu kỳ kinh doanh</strong> (cyclic) thể hiện xu hướng biến đổi dài hạn của
chuỗi thời gian, thường ít nhất hai năm. Chu kỳ kinh doanh khác với
yếu tố mùa vụ ở chỗ, chu kỳ biến đổi của yếu tố mùa vụ thường là đã
được biết trước và mang tính ngắn hạn.</li>
</ul>
<p>Khi phân tích chuỗi thời gian tập trung vào 2 câu hỏi:</p>
<ul class="simple">
<li>Cái gì đã xảy ra</li>
<li>Cái gì sẽ xảy ra, với độ tin cậy bao nhiêu phần trăm</li>
</ul>
<p>Phân tích chuỗi thời gian sử dụng rất nhiều trong việc dự báo tăng
trưởng, lên kế hoạch. Mô hình này dùng rất nhiều trong Macroeconomics,
Finance…</p>
<p><strong>Lưu ý</strong>:</p>
<ul class="simple">
<li>Để phân tích chuỗi thời gian, R lưu object dưới dạng ts (time series)</li>
<li>Chuỗi thời gian có 1 loạt các kỹ thuật và câu lệnh phân tích riêng
biệt</li>
</ul>
</div>
<div class="section" id="du-lieu-chuoi-thoi-gian">
<h2>1.2. Dữ liệu chuỗi thời gian<a class="headerlink" href="#du-lieu-chuoi-thoi-gian" title="Permalink to this headline">¶</a></h2>
<p>Khi lưu trữ trong R, chuỗi thời gian được lưu dưới dạng <code class="docutils literal notranslate"><span class="pre">ts</span></code> như sau.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Tạo chuỗi thời gian</span>
sales <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="kp">round</span><span class="p">(</span>rnorm<span class="p">(</span><span class="m">24</span><span class="p">,</span><span class="m">50</span><span class="p">,</span><span class="m">10</span><span class="p">),</span><span class="m">0</span><span class="p">))</span>
<span class="c1">#Tạo object ts</span>
tsales <span class="o">&lt;-</span> ts<span class="p">(</span>sales<span class="p">,</span> start <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">2003</span><span class="p">,</span><span class="m">1</span><span class="p">),</span> frequency <span class="o">=</span> <span class="m">12</span><span class="p">)</span>
tsales
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span>
<span class="c1">## 2003  57  49  44  31  40  63  51  48  41  30  57  45</span>
<span class="c1">## 2004  50  47  61  49  48  33  70  49  42  51  65  55</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Các chỉ số cơ bản</span>
<span class="c1">#plot</span>
plot<span class="p">(</span>tsales<span class="p">,</span> pch<span class="o">=</span><span class="m">19</span><span class="p">,</span> type <span class="o">=</span> <span class="s">&quot;o&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image0" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-2-1.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Thời điểm bắt đầu</span>
start<span class="p">(</span>tsales<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] 2003    1</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Thời điểm kết thúc</span>
end<span class="p">(</span>tsales<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] 2004   12</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Frequency</span>
frequency<span class="p">(</span>tsales<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] 12</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Tạo subset</span>
tsales.subset <span class="o">&lt;-</span> window<span class="p">(</span>tsales<span class="p">,</span> start  <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">2003</span><span class="p">,</span><span class="m">9</span><span class="p">),</span> end <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">2004</span><span class="p">,</span><span class="m">3</span><span class="p">))</span>
tsales.subset
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span>
<span class="c1">## 2003                                  41  30  57  45</span>
<span class="c1">## 2004  50  47  61</span>
</pre></div>
</div>
</div>
<div class="section" id="smoothing">
<h2>1.3. Smoothing<a class="headerlink" href="#smoothing" title="Permalink to this headline">¶</a></h2>
<p>Centered Moving Average là kỹ thuật làm trơn để giảm đi các yếu tố gây
nhiễu trong chuỗi thời gian.</p>
<div class="math notranslate">
\[S_t=\frac{Y_{t-q}+...+Y_t+...+Y_{t+q}}{2q+1}\]</div>
<p><span class="math notranslate">\(S_t\)</span> được gọi là giá trị làm trơn (smoothed value) tại thời điểm
t, <span class="math notranslate">\(k=2q+1\)</span> là số quan sát được lấy giá trị trung bình. k thường
là giá trị lẻ.</p>
<p>Mô hình trên được gọi là Moving Average (MA)</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>forecast<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggfortify<span class="p">)</span>
par<span class="p">(</span>mfrow<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">2</span><span class="p">))</span>
plot<span class="p">(</span>Nile<span class="p">)</span>
plot<span class="p">(</span>ma<span class="p">(</span>Nile<span class="p">,</span> <span class="m">3</span><span class="p">),</span> main <span class="o">=</span> <span class="s">&quot;Moving Average with k=3&quot;</span><span class="p">)</span>
plot<span class="p">(</span>ma<span class="p">(</span>Nile<span class="p">,</span> <span class="m">10</span><span class="p">),</span> main <span class="o">=</span> <span class="s">&quot;Moving Average with k=10&quot;</span><span class="p">)</span>
plot<span class="p">(</span>ma<span class="p">(</span>Nile<span class="p">,</span> <span class="m">15</span><span class="p">),</span> main <span class="o">=</span> <span class="s">&quot;Moving Average with k=15&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image1" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-3-1.png" /></p>
</div>
<div class="section" id="seasonal-decomposition">
<h2>1.4. Seasonal decomposition<a class="headerlink" href="#seasonal-decomposition" title="Permalink to this headline">¶</a></h2>
<p>Bất kỳ mô hình times series nào cũng được cấu thành bởi ba yếu tố</p>
<ul class="simple">
<li>Trend: Xu hương phát triển theo thời gian</li>
<li>Seasonal: Yếu tố chu kỳ</li>
<li>Irregular component (error): Các yếu tố gây nhiễu</li>
</ul>
<p>Mô hình chuỗi thời gian cơ bản có hai dạng:</p>
<ul class="simple">
<li>Additive: <span class="math notranslate">\(Y_t=Trend_t + Seasonal_t + Irregular_t\)</span></li>
<li>Multiplicative: <span class="math notranslate">\(Y_t=Trend_t * Seasonal_t * Irregular_t\)</span></li>
</ul>
<p>Do đó, để phân tích chuỗi thời gian, ta cũng cần bóc tách chuỗi thời
gian thành 3 yếu tố như trên bằng hàm stl (Seasonal Decomposition of
Time Series by Loess)</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>stl<span class="p">(</span>ts<span class="p">,</span> s.window <span class="o">=</span> <span class="p">,</span> t.window <span class="o">=</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Lưu ý</strong>:</p>
<ul class="simple">
<li>Hàm trên chỉ dùng được cho Additive model</li>
<li>Đối với Multiplicative, ta cần biến đổi như sau;</li>
</ul>
<div class="math notranslate">
\[log(Y_t) = log(Trend_t * Seasonal_t * Irregular_t)=log(Trend_t)+log(Seasonal_t)+log(Irregular_t)\]</div>
<ul class="simple">
<li>s.window: kiểm soát yếu tố thời vụ (seasonal) ảnh hưởng đên chuối
thời gian thế nào. Nếu <span class="math notranslate">\(s.window=&quot;period&quot;\)</span> thì yếu tố thời vụ
sẽ giống hệt nhau qua các năm</li>
<li>t.window: kiểm soát yếu tố xu hướng (trend) thay đổi theo thời gian
thế nào</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
par<span class="p">(</span>mfrow<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">))</span>
<span class="c1">#Mô hình có dạng Multiplicative</span>
plot<span class="p">(</span>AirPassengers<span class="p">)</span>
<span class="c1">#Chuyển sang dạng Additive</span>
lAirPassengers <span class="o">&lt;-</span> <span class="kp">log</span><span class="p">(</span>AirPassengers<span class="p">)</span>
plot<span class="p">(</span>AirPassengers<span class="p">)</span>
</pre></div>
</div>
<p><img alt="image2" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-5-1.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Phân tích thành phần ts</span>
fit <span class="o">&lt;-</span> stl<span class="p">(</span>lAirPassengers<span class="p">,</span> s.window <span class="o">=</span> <span class="s">&quot;period&quot;</span><span class="p">)</span>
autoplot<span class="p">(</span>fit<span class="p">)</span> <span class="o">+</span> theme_bw<span class="p">()</span>
</pre></div>
</div>
<p><img alt="image3" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-5-2.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Quay lại dữ liệu gốc</span>
fit<span class="o">$</span>time.series <span class="o">%&gt;%</span> <span class="kp">head</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##         seasonal    trend   remainder</span>
<span class="c1">## [1,] -0.09164042 4.829389 -0.01924936</span>
<span class="c1">## [2,] -0.11402828 4.830368  0.05434477</span>
<span class="c1">## [3,]  0.01586585 4.831348  0.03558845</span>
<span class="c1">## [4,] -0.01402759 4.833377  0.04046325</span>
<span class="c1">## [5,] -0.01502478 4.835406 -0.02459053</span>
<span class="c1">## [6,]  0.10978976 4.838166 -0.04268143</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>fit<span class="o">$</span>time.series <span class="o">%&gt;%</span> exp <span class="o">%&gt;%</span> <span class="kp">head</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##       seasonal    trend remainder</span>
<span class="c1">## [1,] 0.9124332 125.1344 0.9809347</span>
<span class="c1">## [2,] 0.8922327 125.2571 1.0558486</span>
<span class="c1">## [3,] 1.0159924 125.3798 1.0362293</span>
<span class="c1">## [4,] 0.9860703 125.6345 1.0412930</span>
<span class="c1">## [5,] 0.9850875 125.8897 0.9757094</span>
<span class="c1">## [6,] 1.1160434 126.2377 0.9582166</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Phân tích xu hướng theo tháng và seasonal</span>
monthplot<span class="p">(</span>AirPassengers<span class="p">)</span>
</pre></div>
</div>
<p><img alt="image4" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-5-3.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>seasonplot<span class="p">(</span>AirPassengers<span class="p">,</span> col <span class="o">=</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> type <span class="o">=</span> <span class="s">&quot;o&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image5" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-5-4.png" /></p>
<p><strong>Lưu ý</strong>: Nhìn vào bảng, ta có thể có các nhận định sau:</p>
<ul class="simple">
<li>Tháng một, yếu tố thời vụ khiến khách hàng giảm 9% (seasonal=-0.091)</li>
<li>Tháng bảy, yếu tố thời vụ khiến khách hàng tăng 21% (seasonal =
0.216)</li>
</ul>
</div>
<div class="section" id="exponential-forecasting-model">
<h2>1.5. Exponential Forecasting Model<a class="headerlink" href="#exponential-forecasting-model" title="Permalink to this headline">¶</a></h2>
<p>Mô hình dạng này rất đơn giản nhưng có thể đưa ra các dự báo ngắn hạn
khá chính xác. Có 3 dạng:</p>
<ul class="simple">
<li>Single Exponential Model (Simple Exponential Model)</li>
<li>Double Exponential Model (Hold Exponential Model)</li>
<li>Triple Exponential Model (Hold-Winters Exponential Model)</li>
</ul>
<div class="section" id="single-exponential-model">
<h3>1.5.1. Single Exponential Model<a class="headerlink" href="#single-exponential-model" title="Permalink to this headline">¶</a></h3>
<div class="math notranslate">
\[Y_t=level + irregular_t\]</div>
<p>Dự báo giá trị của <span class="math notranslate">\(Y_{t+1}\)</span> (1-step ahead forecast) là:</p>
<div class="math notranslate">
\[Y_{t+1}=c_0Y_t + c_1Y_{t-1}+c_2Y_{t-2}+...\]</div>
<p>với</p>
<div class="math notranslate">
\[c_i=\alpha(1-\alpha)^i\]</div>
<p>,</p>
<div class="math notranslate">
\[\sum c_i=1\]</div>
<p>,</p>
<div class="math notranslate">
\[i=0,1,2...\]</div>
<p>,</p>
<div class="math notranslate">
\[\alpha\in[0,1]\]</div>
<p><a href="#id1"><span class="problematic" id="id2">:raw-latex:`\alpha `đo lường độ ảnh hưởng của các biến trước đó đến giá
trị dự báo :math:`Y_{t+1}`</span></a>:</p>
<ul class="simple">
<li>:raw-latex:<a href="#id3"><span class="problematic" id="id4">`</span></a>alpha <a href="#id5"><span class="problematic" id="id6">`</span></a>càng gần 1, các biến càng gần có trọng số càng
lớn</li>
<li>:raw-latex:<a href="#id7"><span class="problematic" id="id8">`</span></a>alpha <a href="#id9"><span class="problematic" id="id10">`</span></a>càng gần 0, các biến càng xa có trọng số càng lớn</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>forecast<span class="p">)</span>
fit <span class="o">&lt;-</span> ets<span class="p">(</span>y <span class="o">=</span> nhtemp<span class="p">,</span> model <span class="o">=</span> <span class="s">&quot;ANN&quot;</span><span class="p">)</span>
fit
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## ETS(A,N,N)</span>
<span class="c1">##</span>
<span class="c1">## Call:</span>
<span class="c1">##  ets(y = nhtemp, model = &quot;ANN&quot;)</span>
<span class="c1">##</span>
<span class="c1">##   Smoothing parameters:</span>
<span class="c1">##     alpha = 0.182</span>
<span class="c1">##</span>
<span class="c1">##   Initial states:</span>
<span class="c1">##     l = 50.2759</span>
<span class="c1">##</span>
<span class="c1">##   sigma:  1.1263</span>
<span class="c1">##</span>
<span class="c1">##      AIC     AICc      BIC</span>
<span class="c1">## 265.9298 266.3584 272.2129</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>forecast<span class="p">(</span>fit<span class="p">,</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##      Point Forecast    Lo 80    Hi 80    Lo 95   Hi 95</span>
<span class="c1">## 1972       51.87045 50.42708 53.31382 49.66301 54.0779</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>autoplot<span class="p">(</span>forecast<span class="p">(</span>fit<span class="p">,</span> <span class="m">1</span><span class="p">),</span> xlab<span class="o">=</span><span class="s">&quot;Year&quot;</span><span class="p">,</span>
    ylab<span class="o">=</span><span class="kp">expression</span><span class="p">(</span><span class="kp">paste</span><span class="p">(</span><span class="s">&quot;Temperature (&quot;</span><span class="p">,</span> degree<span class="o">*</span><span class="bp">F</span><span class="p">,</span><span class="s">&quot;)&quot;</span><span class="p">,)),</span>
    main<span class="o">=</span><span class="s">&quot;New Haven Annual Mean Temperature&quot;</span><span class="p">)</span> <span class="o">+</span>
  theme_bw<span class="p">()</span>
</pre></div>
</div>
<p><img alt="image6" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-6-1.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>accuracy<span class="p">(</span>fit<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##                     ME     RMSE       MAE       MPE     MAPE      MASE</span>
<span class="c1">## Training set 0.1460295 1.126268 0.8951331 0.2418693 1.748922 0.7512497</span>
<span class="c1">##                     ACF1</span>
<span class="c1">## Training set -0.00653111</span>
</pre></div>
</div>
<p><strong>Giải thích</strong>:</p>
<ul class="simple">
<li><span class="math notranslate">\(\alpha=0.182\)</span> cho thấy rất nhiều quan sát được tính đến trong
mô hình.</li>
<li>Độ chính xác của mô hình được tính bằng các chỉ số thông dụng sau</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="13%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Chỉ số</th>
<th class="head">Viết
tắt</th>
<th class="head">Cách tính</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Mean error</td>
<td>ME</td>
<td><span class="math notranslate">\(mean(\epsilon_t)\)</span></td>
</tr>
<tr class="row-odd"><td>Root mean squared error</td>
<td>RMSE</td>
<td><span class="math notranslate">\(sqrt(mean(\epsilon_t
^2))\)</span></td>
</tr>
<tr class="row-even"><td>Mean absolute error</td>
<td>MAE</td>
<td><span class="math notranslate">\(mean(\epsilon_t)\)</span></td>
</tr>
<tr class="row-odd"><td>Mean percentage error</td>
<td>MPE</td>
<td><span class="math notranslate">\(mean(100*\epsilon_t/
Y_t)\)</span></td>
</tr>
<tr class="row-even"><td>Mean absolute percentage
error</td>
<td>MAPE</td>
<td><span class="math notranslate">\(mean( 100*\epsilon_t
/Y_t)\)</span></td>
</tr>
</tbody>
</table>
<p>ME (mean ), RMSE, MAE, MPE, MAPE, MASE</p>
</div>
<div class="section" id="hold-holt-winters-exponential-smoothing">
<h3>1.5.2. Hold &amp; Holt-Winters exponential smoothing<a class="headerlink" href="#hold-holt-winters-exponential-smoothing" title="Permalink to this headline">¶</a></h3>
<p><strong>Hold exponential smoothing</strong></p>
<div class="math notranslate">
\[Y_t=level + slope*t + irregular_t\]</div>
<ul class="simple">
<li><span class="math notranslate">\(\alpha\)</span>: Độ ảnh hưởng của các biến y trong quá khứ đến biến
hiện tại</li>
<li><span class="math notranslate">\(\beta\)</span>: Độ ảnh hưởng của biến xu hướng trong quá khứ đến hiện
tại</li>
</ul>
<p><strong>Hold-Winters exponential smoothing</strong></p>
<div class="math notranslate">
\[Y_t=level + slope*t + s_t + irregular_t\]</div>
<ul class="simple">
<li><span class="math notranslate">\(\alpha\)</span>: Độ ảnh hưởng của các biến y trong quá khứ đến biến
hiện tại</li>
<li><span class="math notranslate">\(\beta\)</span>: Độ ảnh hưởng của biến xu hướng trong quá khứ đến hiện
tại</li>
<li><span class="math notranslate">\(\gamma\)</span>: Độ ảnh hường của biến chu kỳ đến hiện tại</li>
</ul>
<p><strong>Lưu ý</strong>: Các ảnh hưởng của slope và chu kỳ (<a href="#id11"><span class="problematic" id="id12">:raw-latex:`\beta `và
:raw-latex:`</span></a>gamma`) đến giá trị hiện tại được tính theo công thức giống
như alpha</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>forecast<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
fit <span class="o">&lt;-</span> ets<span class="p">(</span><span class="kp">log</span><span class="p">(</span>AirPassengers<span class="p">),</span> model <span class="o">=</span> <span class="s">&quot;AAA&quot;</span><span class="p">)</span>
fit
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## ETS(A,A,A)</span>
<span class="c1">##</span>
<span class="c1">## Call:</span>
<span class="c1">##  ets(y = log(AirPassengers), model = &quot;AAA&quot;)</span>
<span class="c1">##</span>
<span class="c1">##   Smoothing parameters:</span>
<span class="c1">##     alpha = 0.6534</span>
<span class="c1">##     beta  = 1e-04</span>
<span class="c1">##     gamma = 1e-04</span>
<span class="c1">##</span>
<span class="c1">##   Initial states:</span>
<span class="c1">##     l = 4.8022</span>
<span class="c1">##     b = 0.01</span>
<span class="c1">##     s=-0.1047 -0.2186 -0.0761 0.0636 0.2083 0.217</span>
<span class="c1">##            0.1145 -0.011 -0.0111 0.0196 -0.1111 -0.0905</span>
<span class="c1">##</span>
<span class="c1">##   sigma:  0.0359</span>
<span class="c1">##</span>
<span class="c1">##       AIC      AICc       BIC</span>
<span class="c1">## -208.3619 -203.5047 -157.8750</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Dự báo</span>
pred <span class="o">&lt;-</span> forecast<span class="p">(</span>fit<span class="p">,</span> <span class="m">5</span><span class="p">)</span>
pred
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95</span>
<span class="c1">## Jan 1961       6.103667 6.057633 6.149701 6.033264 6.174070</span>
<span class="c1">## Feb 1961       6.093102 6.038107 6.148096 6.008995 6.177208</span>
<span class="c1">## Mar 1961       6.233814 6.171126 6.296502 6.137940 6.329688</span>
<span class="c1">## Apr 1961       6.213130 6.143591 6.282668 6.106780 6.319480</span>
<span class="c1">## May 1961       6.223273 6.147500 6.299047 6.107388 6.339159</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>autoplot<span class="p">(</span>pred<span class="p">,</span> main<span class="o">=</span><span class="s">&quot;Forecast for Air Travel&quot;</span><span class="p">,</span>
    ylab<span class="o">=</span><span class="s">&quot;Log(AirPassengers)&quot;</span><span class="p">,</span> xlab<span class="o">=</span><span class="s">&quot;Time&quot;</span><span class="p">)</span> <span class="o">+</span>
  theme_bw<span class="p">()</span>
</pre></div>
</div>
<p><img alt="image7" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-7-1.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>pred<span class="o">$</span>mean <span class="o">&lt;-</span> <span class="kp">exp</span><span class="p">(</span>pred<span class="o">$</span><span class="kp">mean</span><span class="p">)</span>
pred<span class="o">$</span>lower <span class="o">&lt;-</span> <span class="kp">exp</span><span class="p">(</span>pred<span class="o">$</span>lower<span class="p">)</span>
pred<span class="o">$</span>upper <span class="o">&lt;-</span> <span class="kp">exp</span><span class="p">(</span>pred<span class="o">$</span>upper<span class="p">)</span>
p <span class="o">&lt;-</span> <span class="kp">cbind</span><span class="p">(</span>pred<span class="o">$</span><span class="kp">mean</span><span class="p">,</span> pred<span class="o">$</span>lower<span class="p">,</span> pred<span class="o">$</span>upper<span class="p">)</span>
<span class="kp">dimnames</span><span class="p">(</span>p<span class="p">)[[</span><span class="m">2</span><span class="p">]]</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;mean&quot;</span><span class="p">,</span> <span class="s">&quot;Lo 80&quot;</span><span class="p">,</span> <span class="s">&quot;Lo 95&quot;</span><span class="p">,</span> <span class="s">&quot;Hi 80&quot;</span><span class="p">,</span> <span class="s">&quot;Hi 95&quot;</span><span class="p">)</span>
p <span class="o">%&gt;%</span> <span class="kp">head</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##          mean    Lo 80    Lo 95    Hi 80    Hi 95</span>
<span class="c1">## [1,] 447.4958 427.3626 417.0741 468.5774 480.1365</span>
<span class="c1">## [2,] 442.7926 419.0991 407.0741 467.8256 481.6452</span>
<span class="c1">## [3,] 509.6958 478.7246 463.0988 542.6706 560.9814</span>
<span class="c1">## [4,] 499.2613 465.7230 448.8908 535.2148 555.2839</span>
<span class="c1">## [5,] 504.3514 467.5469 449.1637 544.0531 566.3198</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kp">class</span><span class="p">(</span>p<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] &quot;mts&quot;    &quot;ts&quot;     &quot;matrix&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tu-dong-xay-dung-mo-hinh">
<h3>1.5.3. Tự động xây dựng mô hình<a class="headerlink" href="#tu-dong-xay-dung-mo-hinh" title="Permalink to this headline">¶</a></h3>
<p>Hàm <strong>ets</strong> cho phép tự động lựa chọn mô hình tốt nhất theo phương pháp
maximum likelihood.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>forecast<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="p">(</span>fit <span class="o">&lt;-</span> ets<span class="p">(</span>JohnsonJohnson<span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## ETS(M,A,M)</span>
<span class="c1">##</span>
<span class="c1">## Call:</span>
<span class="c1">##  ets(y = JohnsonJohnson)</span>
<span class="c1">##</span>
<span class="c1">##   Smoothing parameters:</span>
<span class="c1">##     alpha = 0.1481</span>
<span class="c1">##     beta  = 0.0912</span>
<span class="c1">##     gamma = 0.4908</span>
<span class="c1">##</span>
<span class="c1">##   Initial states:</span>
<span class="c1">##     l = 0.6146</span>
<span class="c1">##     b = 0.005</span>
<span class="c1">##     s=0.692 1.2644 0.9666 1.077</span>
<span class="c1">##</span>
<span class="c1">##   sigma:  0.0889</span>
<span class="c1">##</span>
<span class="c1">##      AIC     AICc      BIC</span>
<span class="c1">## 166.6964 169.1289 188.5738</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>forecast<span class="p">(</span>fit<span class="p">)</span> <span class="o">%&gt;%</span> autoplot <span class="o">+</span> theme_bw<span class="p">()</span>
</pre></div>
</div>
<p><img alt="image8" src="p05-01-chuoi-thoi-gian_files/figure-html/unnamed-chunk-8-1.png" /></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="p05-02-arima.html" class="btn btn-neutral float-right" title="2. Mô hình ARIMA" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="p04-06-factor-analysis.html" class="btn btn-neutral float-left" title="6. Phân tích nhân tố ẩn (factor analysis)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Anh Hoang Duc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>