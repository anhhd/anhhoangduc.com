OCR với ``tesseract``
=====================

Giới thiệu OCR
--------------

OCR (Optical Character Recognition) là công nghệ cho phép nhận diện chữ
scan và chuyển đổi thành dữ liệu. Với R, ta có thể dùng package
``tesseract`` để sử dụng công nghệ OCR.

Xem ví dụ dưới đây.

.. code:: r

   library(tesseract)

::

   ## Warning: package 'tesseract' was built under R version 3.4.4

.. code:: r

   eng <- tesseract("eng")
   text <- tesseract::ocr("data/ocr-image-en.png", engine = eng)
   cat(text)

::

   ## This is a lot of 12 point text to test the
   ## ocr code and see if it works on all types
   ## of file format.
   ## 
   ## The quick brown dog jumped over the
   ## lazy fox. The quick brown dog jumped
   ## over the lazy fox. The quick brown dog
   ## jumped over the lazy fox. The quick
   ## brown dog jumped over the lazy fox.

OCR với các ngôn ngữ khác nhau
------------------------------

Ta có thể tham khảo các ngôn ngữ được tesseract hỗ trợ ở đây
[https://github.com/tesseract-ocr/tessdata]. Ta có thể download các ngôn
ngữ khác với câu lệnh sau.

.. code:: r

   # Download tiếng Việt
   tesseract_download("vie")

Trong trường hợp không download trực tiếp được từ R, ta có thể download
thủ công và copy dữ liệu download vào đường dẫn sau.

.. code:: r

   tesseract_info()$datapath

**Lưu ý**: file dữ liệu là ``vie.traineddata`` trong thư mục ``data``

Kiểm tra thử tiếng Việt.

.. code:: r

   # tesseract_download("vie")
   vie <- tesseract("vie")
   text <- tesseract::ocr("data/ocr-image-vn.png", engine = vie)
   cat(text)

Xử lý file pdf
--------------

Với các file pdf đã scan, ta cần chuyển đổi thành dạng png và sau đó xử
lý như bình thường. Lưu ý: Hệ thống chữ viết tay được scan vẫn là vấn đề
khó khăn lớn trong lĩnh vực OCR.

.. code:: r

   # Scan pdf file
   pngfile <- pdftools::pdf_convert('data/ocr-scan.pdf', dpi = 600)

.. code:: r

   text1 <- tesseract::ocr("data/ocr-scan-01.png", engine = vie)
   cat(text1)
   text2 <- tesseract::ocr("data/ocr-scan-02.png", engine = vie)
   cat(text2)

Tài liệu tham khảo
------------------

-  https://cran.r-project.org/web/packages/tesseract/vignettes/intro.html
