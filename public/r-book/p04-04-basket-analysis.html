

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="vi" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="vi" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Phân tích giỏ hàng &mdash; Tài liệu Phân tích dữ liệu với R 2019</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2019',
              LANGUAGE:'vi',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Tìm Kiếm" href="search.html" />
    <link rel="next" title="5. Principal component analysis" href="p04-05-pca.html" />
    <link rel="prev" title="3. Hierachical clustering" href="p04-03-hierarchical-clustering.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Phân tích dữ liệu với R
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Giới thiệu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p01-01-gioi-thieu.html">Khoa học dữ liệu và nghề phân tích dữ liệu</a></li>
</ul>
<p class="caption"><span class="caption-text">Phân tích khám phá dữ liệu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p02-03-bien-doi-du-lieu-dplyr.html">1. Ngữ pháp của biến đổi dữ liệu với DPLYR</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-04-phan-ra-va-xoay-chieu-du-lieu.html">2. Phân rã và xoay chiều dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-05-cac-chi-so-thong-ke.html">3. Các chỉ số thống kê mô tả cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-06-lap-trinh-ham.html">4. Lập trình hàm</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-07-lap-trinh-ham-voi-purrr.html">5. Lập trình chức năng hàm với purrr</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-08-bien-doi-du-lieu-text.html">6. Biến đổi dữ liệu text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-11-quan-ly-nhieu-mo-hinh.html">7. Quản lý kết quả phân tích từ nhiều mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-15-thong-ke-co-ban.html">8. Xác suất và phân phối thống kê cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-16-power-analysis.html">9. Power analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-20-sampling-methods.html">10. Phương pháp ước lượng lấy mẫu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-50-datatable.html">11. Biến đổi dữ liệu với <code class="docutils literal notranslate"><span class="pre">data.table</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-60-thu-thap-du-lieu-tu-website.html">12. Thu thập dữ liệu từ website</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-99-meo-trong-r.html">13. Các mẹo trong R</a></li>
</ul>
<p class="caption"><span class="caption-text">Supervised learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p03-01-nguyen-ly-du-bao.html">1. Các nguyên lý dự báo</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-02-mo-hinh-ols.html">2. Mô hình OLS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-03-logistic-regression.html">3. Mô hình hồi quy logistic</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-04-decision-tree.html">4. Cây quyết định</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-05-bagging-boosting.html">5. Bagging, RandomForest và Boosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-08-svm.html">6. Support Vector Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-09-feature-engineering.html">7. Feature Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-15-regularization.html">8. Regularization</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-17-nonlinear.html">9. Mô hình phi tuyến tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-30-credit-scoring.html">10. Credit Scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-35-caret.html">11. Xây dựng mô hình dự báo với caret</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-65-chat-luong-mo-hinh.html">12. Chất lượng mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-70-tidymodels.html">13. Tidymodels</a></li>
</ul>
<p class="caption"><span class="caption-text">Unsupervised learning</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="p04-01-unsupervised-learning.html">1. Unsupervised learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-02-kmeans.html">2. k-means</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-03-hierarchical-clustering.html">3. Hierachical clustering</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Phân tích giỏ hàng</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cac-khai-niem-co-ban">4.1. Các khái niệm cơ bản</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cach-thuc-hien-mo-hinh">4.2. Cách thực hiện mô hình</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ba-cau-hoi-khi-phan-tich-gio-hang">4.3. Ba câu hỏi khi phân tích giỏ hàng</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cac-san-pham-nao-hay-duoc-mua-cung-nhau">4.3.1. Các sản phẩm nào hay được mua cùng nhau</a></li>
<li class="toctree-l3"><a class="reference internal" href="#khach-hang-mua-san-pham-a-thi-se-mua-san-pham-nao-tiep-theo">4.3.2. Khách hàng mua sản phẩm A thì sẽ mua sản phẩm nào tiếp theo?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#khach-hang-mua-san-pham-gi-thi-se-mua-tiep-san-pham-a">4.3.3. Khách hàng mua sản phẩm gì thì sẽ mua tiếp sản phẩm A?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#uu-nhuoc-diem">4.4. Ưu nhược điểm</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="p04-05-pca.html">5. Principal component analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-06-factor-analysis.html">6. Phân tích nhân tố ẩn (factor analysis)</a></li>
</ul>
<p class="caption"><span class="caption-text">Chuỗi thời gian</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p05-01-chuoi-thoi-gian.html">1. Giới thiệu về chuỗi thời gian</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-02-arima.html">2. Mô hình ARIMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant.html">3. Phân tích chuỗi thời gian với tidyquant và timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-06-du-bao-ts-voi-prophet.html">4. Dự báo chuỗi thời gian với prophet</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-07-du-bao-ts-voi-timetk.html">5. Dự báo chuỗi thời gian với timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-08-abnomaly-detection.html">6. Abnomaly detection trong times series</a></li>
</ul>
<p class="caption"><span class="caption-text">Ngôn ngữ tự nghiên</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p06-01-nlp-co-ban.html">1. Xử lý ngôn ngữ tự nhiên cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-04-text-classification.html">2. Phân loại text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-07-nlp-api.html">3. Sử dụng API từ các dịch vụ đám mây</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-10-ocr-tesseract.html">4. OCR với <code class="docutils literal notranslate"><span class="pre">tesseract</span></code></a></li>
</ul>
<p class="caption"><span class="caption-text">Các phương pháp khác</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p07-01-survival-analysis.html">1. Survival analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-02-causal-impact.html">2. Causal Impact</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-03-collaborative-filtering.html">3. Collaborative Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-07-spatial-data.html">4. Spatial data</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-10-shiny.html">5. Shiny apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Deep Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p09-01-gioi-thieu-deep-learning.html">1. Giới thiệu cơ bản về Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-02-co-ban-kien-thuc-toan.html">2. Kiến thức cơ bản toán học cho deep learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-03-mo-hinh-deep-learning-co-ban.html">3. Mô hình deep learning cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-04-convolution-neural-network.html">4. Convolution neural networks</a></li>
</ul>
<p class="caption"><span class="caption-text">Cloud Computing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p10-01-cai-dat-rstudio-server-tren-amazon.html">1. Cài đặt server RStudio trên Amazon</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-03-web-service-azure.html">2. Xây dựng web service với Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-09-apis-voi-plumber.html">3. API với Plumber</a></li>
</ul>
<p class="caption"><span class="caption-text">Kiến thức bổ trợ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p11-01-git.html">1. Sử dụng GIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-02-cmd.html">2. CMD và Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-03-docker.html">3. Sử dụng docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-04-apis.html">4. API</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-05-html-css.html">5. Cơ bản về HTML và CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-09-other.html">6. Các tricks khác</a></li>
</ul>
<p class="caption"><span class="caption-text">Case studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p13-01-casestudy-truc-quan-hoa.html">1. Trực quan hóa dữ liệu</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Phân tích dữ liệu với R</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>4. Phân tích giỏ hàng</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/p04-04-basket-analysis.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="phan-tich-gio-hang">
<h1>4. Phân tích giỏ hàng<a class="headerlink" href="#phan-tich-gio-hang" title="Permalink to this headline">¶</a></h1>
<p>Phân tích giỏ hàng là 1 phương pháp phân tích với mục đích là để tìm ra
được tổ hợp các sản phẩm hay được khách hàng mua cùng nhau. Phân tích
giỏ hàng là một nhánh của Frequent Pattern Mining (FPM) là kỹ thuật được
dùng trong việc phân tích các hành vi lặp đi lặp lại giữa các yêu tố có
liên hệ với nhau. FPM được sử dụng đặc biệt rộng rãi trong các ngành như
ecommerce, banking, retail… giúp người bán có thể phân tích hành vi mua
sắm của khách hàng. Phương pháp phân tích thương được dùng nhất là sử
dụng thuật toán<code class="docutils literal notranslate"><span class="pre">apriori</span></code></p>
<div class="section" id="cac-khai-niem-co-ban">
<h2>4.1. Các khái niệm cơ bản<a class="headerlink" href="#cac-khai-niem-co-ban" title="Permalink to this headline">¶</a></h2>
<p>Trong phân tích giỏ hàng, chỉ có 5 thuật ngữ đơn giản ta cần phải nhớ là
<code class="docutils literal notranslate"><span class="pre">transaction</span></code>, <code class="docutils literal notranslate"><span class="pre">rule</span></code>, <code class="docutils literal notranslate"><span class="pre">support</span></code>, <code class="docutils literal notranslate"><span class="pre">confidence</span></code> và <code class="docutils literal notranslate"><span class="pre">lift</span></code></p>
<ul class="simple">
<li><strong>Item</strong>: Sản phẩm chứa trong giỏ hàng</li>
<li><strong>Transaction</strong>: Giao dịch là một hoặc một nhóm các sản phẩm được mua
khi khách hàng thực hiện <em>trong cùng</em> một giao dịch</li>
<li><strong>Rule</strong>: Rule là một quy tắc thể hiện mối quan hệ giữa các sản phẩm
có trong cùng một giỏ hàng, có dạng <code class="docutils literal notranslate"><span class="pre">nếu</span> <span class="pre">A,</span> <span class="pre">thì</span> <span class="pre">B</span></code>.</li>
</ul>
<div class="math notranslate">
\[\left \{{i_{1},i_{2},...}\right \} =&gt; {i_{k}}\]</div>
<p>Ví dụ:</p>
<blockquote>
<div>{Bánh mỳ} =&gt; {Sữa}: Nếu khách hàng mua bánh mỳ thì khách hàng sẽ mua
thêm sữa</div></blockquote>
<ul class="simple">
<li><strong>Support</strong>：Tần suất (dưới dạng phần trăm) xuất hiện của các quy
tắc trong tổng số các giao dịch.</li>
</ul>
<blockquote>
<div>Ví dụ: Một cửa hàng trong tháng 1 có 100 khách hàng, mỗi khách hàng
thực hiện một giao dịch. Trong đó 50 khách hàng mua sản phẩm A, 75
khách hàng mua sản phẩm B, và 25 khách hàng mua cả sản phẩm A và B -
Support(sản phẩm A) = 50% - Support(Sản phẩm A, sản phẩm B) = 25%</div></blockquote>
<ul class="simple">
<li><strong>Confidence</strong>: Cơ hội mua sản phẩm tiếp theo trong hành vi giao dịch
của khác hàng.</li>
</ul>
<div class="math notranslate">
\[Confidence (i_{m} =&gt; i_{n}) = \frac{support(i_{m}\frown i_{n})}{support (i_{m})}\]</div>
<p>&gt; Ví dụ: Confidence (sản phẩm A , sản phẩm B) = 25/50 = 50% - Tức là nếu
1 người mua sản phẩm A, thì xác suất họ cũng mua sản phẩm B là 50%</p>
<ul>
<li><p class="first">Lift: Nếu khách hàng mua sản phẩm A thì khả năng họ mua sản phẩm B sẽ
tăng lên bao nhiêu %</p>
<div class="math notranslate">
\[Lift(i_{m} =&gt; i_{n}) = \frac{support(i_{m}\frown i_{n})}{support(i_{m}) * support (i_{n})} = \frac{Confidence (i_{m} =&gt; i_{n})}{support (i_{n})}\]</div>
<ul class="simple">
<li>Lift có thể cho 3 loại giá trị<ul>
<li>Lift &gt; 1: tức là những sản phẩm ở vế trái của rule sẽ làm tăng
khả năng xảy ra của những sản phẩm ở vế phải của rule (2 sản
phẩm bổ trợ). Ví dụ, mua bia sẽ mua thêm lạc.</li>
<li>Lift &lt; 1: tức là những sản phẩm ở vế trái của rule sẽ làm giảm
khả năng xảy ra của những sản phẩm ở vế phải của rule ( 2 sản
phẩm thay thế được cho nhau). Ví dụ, mua bia sẽ không mua thêm
cafe.</li>
<li>Lift = 1: Các sản phẩm ở vế trái và vế phải xuất hiện độc lập
với nhau về mặt thống kê, ta không thể đưa ra kết luận về tương
quan giữa các sản phẩm.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="cach-thuc-hien-mo-hinh">
<h2>4.2. Cách thực hiện mô hình<a class="headerlink" href="#cach-thuc-hien-mo-hinh" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">arules</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">arulesViz</span><span class="p">)</span>
<span class="nf">data</span><span class="p">(</span><span class="s">&quot;Groceries&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dữ liệu <code class="docutils literal notranslate"><span class="pre">Groceries</span></code> chứa gần 10,000 giao dịch với hơn 160 sản phẩm
khác nhau. Ta có thể xem chi tiết dưới đây.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Thống kê giao dịch</span>
<span class="nf">summary</span><span class="p">(</span><span class="n">Groceries</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## transactions as itemMatrix in sparse format with</span>
<span class="c1">##  9835 rows (elements/itemsets/transactions) and</span>
<span class="c1">##  169 columns (items) and a density of 0.02609146</span>
<span class="c1">##</span>
<span class="c1">## most frequent items:</span>
<span class="c1">##       whole milk other vegetables       rolls/buns             soda</span>
<span class="c1">##             2513             1903             1809             1715</span>
<span class="c1">##           yogurt          (Other)</span>
<span class="c1">##             1372            34055</span>
<span class="c1">##</span>
<span class="c1">## element (itemset/transaction) length distribution:</span>
<span class="c1">## sizes</span>
<span class="c1">##    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15</span>
<span class="c1">## 2159 1643 1299 1005  855  645  545  438  350  246  182  117   78   77   55</span>
<span class="c1">##   16   17   18   19   20   21   22   23   24   26   27   28   29   32</span>
<span class="c1">##   46   29   14   14    9   11    4    6    1    1    1    1    3    1</span>
<span class="c1">##</span>
<span class="c1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span>
<span class="c1">##   1.000   2.000   3.000   4.409   6.000  32.000</span>
<span class="c1">##</span>
<span class="c1">## includes extended item information - examples:</span>
<span class="c1">##        labels  level2           level1</span>
<span class="c1">## 1 frankfurter sausage meat and sausage</span>
<span class="c1">## 2     sausage sausage meat and sausage</span>
<span class="c1">## 3  liver loaf sausage meat and sausage</span>
</pre></div>
</div>
<p><strong>Lưu ý</strong>: Dữ liệu phục vụ phân tích giỏ hàng không phải là dữ liệu dạng
dataframe thông thường mà được cấu trúc định dạng <code class="docutils literal notranslate"><span class="pre">transaction</span></code>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sử dụng dữ liệu groceries</span>
<span class="nf">class</span><span class="p">(</span><span class="n">Groceries</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## [1] &quot;transactions&quot;</span>
<span class="c1">## attr(,&quot;package&quot;)</span>
<span class="c1">## [1] &quot;arules&quot;</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">str</span><span class="p">(</span><span class="n">Groceries</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## Formal class &#39;transactions&#39; [package &quot;arules&quot;] with 3 slots</span>
<span class="c1">##   ..@ data       :Formal class &#39;ngCMatrix&#39; [package &quot;Matrix&quot;] with 5 slots</span>
<span class="c1">##   .. .. ..@ i       : int [1:43367] 13 60 69 78 14 29 98 24 15 29 ...</span>
<span class="c1">##   .. .. ..@ p       : int [1:9836] 0 4 7 8 12 16 21 22 27 28 ...</span>
<span class="c1">##   .. .. ..@ Dim     : int [1:2] 169 9835</span>
<span class="c1">##   .. .. ..@ Dimnames:List of 2</span>
<span class="c1">##   .. .. .. ..$ : NULL</span>
<span class="c1">##   .. .. .. ..$ : NULL</span>
<span class="c1">##   .. .. ..@ factors : list()</span>
<span class="c1">##   ..@ itemInfo   :&#39;data.frame&#39;:  169 obs. of  3 variables:</span>
<span class="c1">##   .. ..$ labels: chr [1:169] &quot;frankfurter&quot; &quot;sausage&quot; &quot;liver loaf&quot; &quot;ham&quot; ...</span>
<span class="c1">##   .. ..$ level2: Factor w/ 55 levels &quot;baby food&quot;,&quot;bags&quot;,..: 44 44 44 44 44 44 44 42 42 41 ...</span>
<span class="c1">##   .. ..$ level1: Factor w/ 10 levels &quot;canned food&quot;,..: 6 6 6 6 6 6 6 6 6 6 ...</span>
<span class="c1">##   ..@ itemsetInfo:&#39;data.frame&#39;:  0 obs. of  0 variables</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Xem 5 giao dịch đầu tiên</span>
<span class="n">Groceries[1</span><span class="o">:</span><span class="m">5</span><span class="n">]</span> <span class="o">%&gt;%</span> <span class="n">inspect</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##   items</span>
<span class="c1">## 1 {citrus fruit,</span>
<span class="c1">##    semi-finished bread,</span>
<span class="c1">##    margarine,</span>
<span class="c1">##    ready soups}</span>
<span class="c1">## 2 {tropical fruit,</span>
<span class="c1">##    yogurt,</span>
<span class="c1">##    coffee}</span>
<span class="c1">## 3 {whole milk}</span>
<span class="c1">## 4 {pip fruit,</span>
<span class="c1">##    yogurt,</span>
<span class="c1">##    cream cheese ,</span>
<span class="c1">##    meat spreads}</span>
<span class="c1">## 5 {other vegetables,</span>
<span class="c1">##    whole milk,</span>
<span class="c1">##    condensed milk,</span>
<span class="c1">##    long life bakery product}</span>
</pre></div>
</div>
<p>Trong thực tế, khi triển khai phân tích, việc đầu tiên ta cần làm là
biến đổi từ định dạng dataframe sang định dạng <code class="docutils literal notranslate"><span class="pre">transactions</span></code>. Ta có
thể biến đổi định dạng của dataframe về <code class="docutils literal notranslate"><span class="pre">transactions</span></code> với hàm <code class="docutils literal notranslate"><span class="pre">as</span></code>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span>
  <span class="n">prod_1</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">as.factor</span><span class="p">,</span>
  <span class="n">prod_2</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">as.factor</span><span class="p">,</span>
  <span class="n">prod_3</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">as.factor</span>
<span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##   prod_1 prod_2 prod_3</span>
<span class="c1">## 1      1      0      1</span>
<span class="c1">## 2      0      0      0</span>
<span class="c1">## 3      1      1      0</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="m">-1</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">as</span><span class="p">(</span><span class="s">&quot;transactions&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">inspect</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##   items               transactionID</span>
<span class="c1">## 1 {prod_2=0,prod_3=1} 1</span>
<span class="c1">## 2 {prod_2=0,prod_3=0} 2</span>
<span class="c1">## 3 {prod_2=1,prod_3=0} 3</span>
</pre></div>
</div>
<p>Phân tích khám phá nhanh các sản phẩm được mua nhiều nhất.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vẽ barchart đơn giản về các item phổ biến nhất</span>
<span class="nf">itemFrequencyPlot</span><span class="p">(</span><span class="n">Groceries</span><span class="p">,</span>
                  <span class="n">type</span> <span class="o">=</span> <span class="s">&quot;absolute&quot;</span><span class="p">,</span>
                  <span class="n">topN</span> <span class="o">=</span> <span class="m">20</span><span class="p">,</span> <span class="n">decreasing</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image0" src="p04-04-basket-analysis_files/figure-html/unnamed-chunk-6-1.png" /></p>
</div>
<div class="section" id="ba-cau-hoi-khi-phan-tich-gio-hang">
<h2>4.3. Ba câu hỏi khi phân tích giỏ hàng<a class="headerlink" href="#ba-cau-hoi-khi-phan-tich-gio-hang" title="Permalink to this headline">¶</a></h2>
<p>Khi sử dụng kỹ thuật phân tích giỏ hàng, có 3 câu hỏi thường gặp về mặt
kinh doanh cần phải trả lời là:</p>
<ul class="simple">
<li>Các sản phẩm nào hay được mua cùng nhau?</li>
<li>Nếu khách hàng mua sản phẩm A rồi thì sẽ hay mua tiếp sản phẩm nào?</li>
<li>Khách hàng nếu mua sản phẩm B thì trước đấy hay mua sản phẩm nào?</li>
</ul>
<div class="section" id="cac-san-pham-nao-hay-duoc-mua-cung-nhau">
<h3>4.3.1. Các sản phẩm nào hay được mua cùng nhau<a class="headerlink" href="#cac-san-pham-nao-hay-duoc-mua-cung-nhau" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="o">&lt;-</span> <span class="nf">apriori</span><span class="p">(</span><span class="n">Groceries</span><span class="p">,</span>
                 <span class="n">parameter</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">supp</span> <span class="o">=</span> <span class="m">0.001</span><span class="p">,</span>
                            <span class="c1"># support &gt;= 0.1%</span>
                                  <span class="n">conf</span> <span class="o">=</span> <span class="m">0.5</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## Apriori</span>
<span class="c1">##</span>
<span class="c1">## Parameter specification:</span>
<span class="c1">##  confidence minval smax arem  aval originalSupport support minlen maxlen</span>
<span class="c1">##         0.5    0.1    1 none FALSE            TRUE   0.001      1     10</span>
<span class="c1">##  target   ext</span>
<span class="c1">##   rules FALSE</span>
<span class="c1">##</span>
<span class="c1">## Algorithmic control:</span>
<span class="c1">##  filter tree heap memopt load sort verbose</span>
<span class="c1">##     0.1 TRUE TRUE  FALSE TRUE    2    TRUE</span>
<span class="c1">##</span>
<span class="c1">## Absolute minimum support count: 9</span>
<span class="c1">##</span>
<span class="c1">## set item appearances ...[0 item(s)] done [0.00s].</span>
<span class="c1">## set transactions ...[169 item(s), 9835 transaction(s)] done [0.00s].</span>
<span class="c1">## sorting and recoding items ... [157 item(s)] done [0.00s].</span>
<span class="c1">## creating transaction tree ... done [0.00s].</span>
<span class="c1">## checking subsets of size 1 2 3 4 5 6 done [0.01s].</span>
<span class="c1">## writing ... [5668 rule(s)] done [0.00s].</span>
<span class="c1">## creating S4 object  ... done [0.00s].</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>                            <span class="c1"># confidence &gt;= 50%</span>
<span class="c1"># Tổng hợp các rules</span>
<span class="n">rules</span> <span class="o">%&gt;%</span> <span class="n">summary</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## set of 5668 rules</span>
<span class="c1">##</span>
<span class="c1">## rule length distribution (lhs + rhs):sizes</span>
<span class="c1">##    2    3    4    5    6</span>
<span class="c1">##   11 1461 3211  939   46</span>
<span class="c1">##</span>
<span class="c1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span>
<span class="c1">##    2.00    3.00    4.00    3.92    4.00    6.00</span>
<span class="c1">##</span>
<span class="c1">## summary of quality measures:</span>
<span class="c1">##     support           confidence          lift</span>
<span class="c1">##  Min.   :0.001017   Min.   :0.5000   Min.   : 1.957</span>
<span class="c1">##  1st Qu.:0.001118   1st Qu.:0.5455   1st Qu.: 2.464</span>
<span class="c1">##  Median :0.001322   Median :0.6000   Median : 2.899</span>
<span class="c1">##  Mean   :0.001668   Mean   :0.6250   Mean   : 3.262</span>
<span class="c1">##  3rd Qu.:0.001729   3rd Qu.:0.6842   3rd Qu.: 3.691</span>
<span class="c1">##  Max.   :0.022267   Max.   :1.0000   Max.   :18.996</span>
<span class="c1">##</span>
<span class="c1">## mining info:</span>
<span class="c1">##       data ntransactions support confidence</span>
<span class="c1">##  Groceries          9835   0.001        0.5</span>
</pre></div>
</div>
<p>Như vậy, khi khai phá dữ liệu của tập <code class="docutils literal notranslate"><span class="pre">Groceries</span></code>, ta có <code class="docutils literal notranslate"><span class="pre">5668</span></code>
rules thỏa mãn hai điều kiện:</p>
<ul class="simple">
<li>Tần suất xuất hiện đạt ít nhất 1%</li>
<li>Confidence của rule đạt ít nhất 50%</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Top 5 rules có lift cao nhất</span>
<span class="n">rules</span> <span class="o">%&gt;%</span>
  <span class="nf">sort</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s">&quot;lift&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">head</span><span class="p">(</span><span class="m">5</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">as</span><span class="p">(</span><span class="s">&quot;data.frame&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##                                                      rules     support</span>
<span class="c1">## 53        {Instant food products,soda} =&gt; {hamburger meat} 0.001220132</span>
<span class="c1">## 37                         {soda,popcorn} =&gt; {salty snack} 0.001220132</span>
<span class="c1">## 444                       {flour,baking powder} =&gt; {sugar} 0.001016777</span>
<span class="c1">## 327                {ham,processed cheese} =&gt; {white bread} 0.001931876</span>
<span class="c1">## 55  {whole milk,Instant food products} =&gt; {hamburger meat} 0.001525165</span>
<span class="c1">##     confidence     lift</span>
<span class="c1">## 53   0.6315789 18.99565</span>
<span class="c1">## 37   0.6315789 16.69779</span>
<span class="c1">## 444  0.5555556 16.40807</span>
<span class="c1">## 327  0.6333333 15.04549</span>
<span class="c1">## 55   0.5000000 15.03823</span>
</pre></div>
</div>
<p><strong>Giải thích</strong>: Với rule đầu tiên là {Instant food products, soda}, ta
có thể diễn giải như sau:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">support</span> <span class="pre">=</span> <span class="pre">0.00122</span></code> - Tần xuất xuất hiện rules trong tổng số các
transaction là 1.22%</li>
<li><code class="docutils literal notranslate"><span class="pre">confidence</span> <span class="pre">=</span> <span class="pre">0.63157</span></code> - Nếu khách hàng mua đồ ăn nhanh (instant
food products), 63.16% khách hàng sẽ mua thêm soda</li>
<li><code class="docutils literal notranslate"><span class="pre">lift</span> <span class="pre">=</span> <span class="pre">18.99</span></code> - Mối quan hệ giữa hai sản phẩm đồ ăn nhanh và soda
cao gần 19 lần so với thông thường (khi hai sản phẩm hoàn toàn độc
lập với nhau)</li>
</ul>
<p><strong>Lưu ý</strong>: Khi phân tích, ta cần loại bỏ các rule thừa (redundant) khi
phân tích dữ liệu. Một rule A được gọi là một rule thừa nếu tồn tại một
rule con có confidence lớn hơn hoặc bằng rule A này. Rule B được gọi là
rule con của rule A nếu có cùng RHS nhưng các sản phẩm trong rule B ít
hơn rule A</p>
<p>Ví dụ: Với 2 rule</p>
<ul class="simple">
<li>Rule A với {a,b,c} → {d}</li>
<li>Rule B với {a,b} → {d} Rule B với {a,b} → {d} được gọi là rule thừa
nếu <span class="math notranslate">\(conf(A) &gt;= conf(B)\)</span></li>
</ul>
<p>Cách loại bỏ rule thừa trong R</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">subset.matrix</span> <span class="o">&lt;-</span> <span class="nf">is.subset</span><span class="p">(</span><span class="n">rules</span><span class="p">,</span> <span class="n">rules</span><span class="p">)</span>
<span class="n">subset.matrix</span><span class="nf">[lower.tri</span><span class="p">(</span><span class="n">subset.matrix</span><span class="p">,</span> <span class="n">diag</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span><span class="n">]</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
<span class="n">redundant</span> <span class="o">&lt;-</span> <span class="nf">colSums</span><span class="p">(</span><span class="n">subset.matrix</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="m">1</span>
<span class="n">rules.pruned</span> <span class="o">&lt;-</span> <span class="n">rules[</span><span class="o">!</span><span class="n">redundant]</span>
<span class="n">rules</span> <span class="o">&lt;-</span> <span class="n">rules.pruned</span>
<span class="n">rules</span> <span class="o">%&gt;%</span> <span class="n">summary</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## set of 1904 rules</span>
<span class="c1">##</span>
<span class="c1">## rule length distribution (lhs + rhs):sizes</span>
<span class="c1">##    2    3    4    5</span>
<span class="c1">##   11 1381  509    3</span>
<span class="c1">##</span>
<span class="c1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span>
<span class="c1">##   2.000   3.000   3.000   3.265   4.000   5.000</span>
<span class="c1">##</span>
<span class="c1">## summary of quality measures:</span>
<span class="c1">##     support           confidence          lift</span>
<span class="c1">##  Min.   :0.001017   Min.   :0.5000   Min.   : 1.957</span>
<span class="c1">##  1st Qu.:0.001118   1st Qu.:0.5238   1st Qu.: 2.211</span>
<span class="c1">##  Median :0.001525   Median :0.5556   Median : 2.678</span>
<span class="c1">##  Mean   :0.002070   Mean   :0.5776   Mean   : 2.907</span>
<span class="c1">##  3rd Qu.:0.002237   3rd Qu.:0.6130   3rd Qu.: 3.180</span>
<span class="c1">##  Max.   :0.022267   Max.   :1.0000   Max.   :18.996</span>
<span class="c1">##</span>
<span class="c1">## mining info:</span>
<span class="c1">##       data ntransactions support confidence</span>
<span class="c1">##  Groceries          9835   0.001        0.5</span>
</pre></div>
</div>
<p>Như vậy, sau khi lọc bỏ các rule thừa, số lượng rule trong dữ liệu giảm
đi gần 3 lần xuống còn 1904 rules khác nhau. Ta có thể vẽ biểu đồ cho
nhóm 10 rules có lift cao nhất như sau.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="o">%&gt;%</span>
  <span class="nf">head</span><span class="p">(</span><span class="m">10</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">plot</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s">&quot;graph&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image1" src="p04-04-basket-analysis_files/figure-html/unnamed-chunk-10-1.png" /></p>
</div>
<div class="section" id="khach-hang-mua-san-pham-a-thi-se-mua-san-pham-nao-tiep-theo">
<h3>4.3.2. Khách hàng mua sản phẩm A thì sẽ mua sản phẩm nào tiếp theo?<a class="headerlink" href="#khach-hang-mua-san-pham-a-thi-se-mua-san-pham-nao-tiep-theo" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="o">&lt;-</span> <span class="nf">apriori</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">Groceries</span><span class="p">,</span>
                  <span class="n">parameter</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">supp</span> <span class="o">=</span> <span class="m">0.001</span><span class="p">,</span>
                                   <span class="n">conf</span> <span class="o">=</span> <span class="m">0.15</span><span class="p">,</span>
                                   <span class="n">minlen</span> <span class="o">=</span> <span class="m">2</span><span class="p">),</span>
                  <span class="n">appearance</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="s">&quot;rhs&quot;</span><span class="p">,</span>
                                    <span class="n">lhs</span> <span class="o">=</span> <span class="s">&quot;whole milk&quot;</span><span class="p">),</span>
                  <span class="n">control</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">verbose</span> <span class="o">=</span> <span class="bp">F</span><span class="p">))</span>
<span class="n">rules</span> <span class="o">%&gt;%</span>
  <span class="nf">sort</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s">&quot;lift&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">head</span> <span class="o">%&gt;%</span>
  <span class="nf">as</span><span class="p">(</span><span class="s">&quot;data.frame&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##                                rules    support confidence      lift</span>
<span class="c1">## 2  {whole milk} =&gt; {root vegetables} 0.04890696  0.1914047 1.7560310</span>
<span class="c1">## 1   {whole milk} =&gt; {tropical fruit} 0.04229792  0.1655392 1.5775950</span>
<span class="c1">## 4           {whole milk} =&gt; {yogurt} 0.05602440  0.2192598 1.5717351</span>
<span class="c1">## 6 {whole milk} =&gt; {other vegetables} 0.07483477  0.2928770 1.5136341</span>
<span class="c1">## 5       {whole milk} =&gt; {rolls/buns} 0.05663447  0.2216474 1.2050318</span>
<span class="c1">## 3             {whole milk} =&gt; {soda} 0.04006101  0.1567847 0.8991124</span>
</pre></div>
</div>
<p>Tham số <code class="docutils literal notranslate"><span class="pre">lhs</span></code> cho phép chúng ta lựa chọn điều kiện về sản phẩm được
mua đầu tiên. Trong trường hợp này, ta thấy khách hàng mua sữa sẽ có xu
hương mua thêm rau củ quả (root vegetables)</p>
</div>
<div class="section" id="khach-hang-mua-san-pham-gi-thi-se-mua-tiep-san-pham-a">
<h3>4.3.3. Khách hàng mua sản phẩm gì thì sẽ mua tiếp sản phẩm A?<a class="headerlink" href="#khach-hang-mua-san-pham-gi-thi-se-mua-tiep-san-pham-a" title="Permalink to this headline">¶</a></h3>
<p>Tương tự với <code class="docutils literal notranslate"><span class="pre">lhs</span></code>, ta có thể sử dụng tham số <code class="docutils literal notranslate"><span class="pre">rhs</span></code> để tìm kiếm các
khách hàng tiềm năng cho một sản phẩm đã xác định trước.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="o">&lt;-</span> <span class="nf">apriori</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">Groceries</span><span class="p">,</span>
                 <span class="n">parameter</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">supp</span> <span class="o">=</span> <span class="m">0.001</span><span class="p">,</span>
                                  <span class="n">conf</span> <span class="o">=</span> <span class="m">0.08</span><span class="p">),</span>
                 <span class="n">appearance</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="s">&quot;lhs&quot;</span><span class="p">,</span>
                                   <span class="n">rhs</span> <span class="o">=</span> <span class="s">&quot;whole milk&quot;</span><span class="p">),</span>
                 <span class="n">control</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">verbose</span> <span class="o">=</span> <span class="bp">F</span><span class="p">))</span>
<span class="n">rules</span> <span class="o">%&gt;%</span>
  <span class="nf">sort</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s">&quot;lift&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">head</span> <span class="o">%&gt;%</span>
  <span class="nf">as</span><span class="p">(</span><span class="s">&quot;data.frame&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##                                                           rules</span>
<span class="c1">## 196                                {rice,sugar} =&gt; {whole milk}</span>
<span class="c1">## 323              {canned fish,hygiene articles} =&gt; {whole milk}</span>
<span class="c1">## 1643              {root vegetables,butter,rice} =&gt; {whole milk}</span>
<span class="c1">## 1705 {root vegetables,whipped/sour cream,flour} =&gt; {whole milk}</span>
<span class="c1">## 1716         {butter,soft cheese,domestic eggs} =&gt; {whole milk}</span>
<span class="c1">## 1985        {pip fruit,butter,hygiene articles} =&gt; {whole milk}</span>
<span class="c1">##          support confidence     lift</span>
<span class="c1">## 196  0.001220132          1 3.913649</span>
<span class="c1">## 323  0.001118454          1 3.913649</span>
<span class="c1">## 1643 0.001016777          1 3.913649</span>
<span class="c1">## 1705 0.001728521          1 3.913649</span>
<span class="c1">## 1716 0.001016777          1 3.913649</span>
<span class="c1">## 1985 0.001016777          1 3.913649</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="uu-nhuoc-diem">
<h2>4.4. Ưu nhược điểm<a class="headerlink" href="#uu-nhuoc-diem" title="Permalink to this headline">¶</a></h2>
<p>Như vậy, ta vừa thực hiện xong việc ứng dụng phân tích giỏ hàng. Đây là
phương pháp cực kỳ hữu hiệu trong việc tìm kiếm các mối quan hệ ẩn, chưa
được khám phá giữa các biến. Phương pháp này cũng có các ưu và nhược
điểm như sau.</p>
<p><strong>Ưu điểm</strong>:</p>
<ul class="simple">
<li>Thực hiện nhanh</li>
<li>Tính giải thích cao, trưc quan hóa</li>
<li>Có thể nhanh chóng tìm ra tập khách hàng tiềm năng theo điều kiện và
không cần phải chia ra thành các tập train/test như các thuật toán
machine learning khác.</li>
</ul>
<p><strong>Nhược điểm</strong>:</p>
<ul class="simple">
<li>Chỉ dùng cho các biến factor, không dùng được cho các biến dạng số
như thu nhập, độ tuổi,… Nếu muốn đưa các biến này vào cần phải biến
đổi thành dạng factor</li>
<li>Khi có quá nhiều nhóm, tốc độ tính toán có thể rất chậm và tràn bộ
nhớ</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="p04-05-pca.html" class="btn btn-neutral float-right" title="5. Principal component analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="p04-03-hierarchical-clustering.html" class="btn btn-neutral float-left" title="3. Hierachical clustering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Anh Hoang Duc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>