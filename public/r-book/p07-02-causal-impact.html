

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="vi" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="vi" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Causal Impact &mdash; Tài liệu Phân tích dữ liệu với R 2019</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2019',
              LANGUAGE:'vi',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Tìm Kiếm" href="search.html" />
    <link rel="next" title="3. Collaborative Filtering" href="p07-03-collaborative-filtering.html" />
    <link rel="prev" title="1. Survival analysis" href="p07-01-survival-analysis.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Phân tích dữ liệu với R
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Giới thiệu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p01-01-gioi-thieu.html">Khoa học dữ liệu và nghề phân tích dữ liệu</a></li>
</ul>
<p class="caption"><span class="caption-text">Phân tích khám phá dữ liệu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p02-03-bien-doi-du-lieu-dplyr.html">1. Ngữ pháp của biến đổi dữ liệu với DPLYR</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-04-phan-ra-va-xoay-chieu-du-lieu.html">2. Phân rã và xoay chiều dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-05-cac-chi-so-thong-ke.html">3. Các chỉ số thống kê mô tả cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-06-lap-trinh-ham.html">4. Lập trình hàm</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-07-lap-trinh-ham-voi-purrr.html">5. Lập trình chức năng hàm với purrr</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-08-bien-doi-du-lieu-text.html">6. Biến đổi dữ liệu text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-11-quan-ly-nhieu-mo-hinh.html">7. Quản lý kết quả phân tích từ nhiều mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-15-thong-ke-co-ban.html">8. Xác suất và phân phối thống kê cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-16-power-analysis.html">9. Power analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-20-sampling-methods.html">10. Phương pháp ước lượng lấy mẫu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-50-datatable.html">11. Biến đổi dữ liệu với <code class="docutils literal notranslate"><span class="pre">data.table</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-60-thu-thap-du-lieu-tu-website.html">12. Thu thập dữ liệu từ website</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-99-meo-trong-r.html">13. Các mẹo trong R</a></li>
</ul>
<p class="caption"><span class="caption-text">Supervised learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p03-01-nguyen-ly-du-bao.html">1. Các nguyên lý dự báo</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-02-mo-hinh-ols.html">2. Mô hình OLS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-03-logistic-regression.html">3. Mô hình hồi quy logistic</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-04-decision-tree.html">4. Cây quyết định</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-05-bagging-boosting.html">5. Bagging, RandomForest và Boosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-08-svm.html">6. Support Vector Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-09-feature-engineering.html">7. Feature Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-15-regularization.html">8. Regularization</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-17-nonlinear.html">9. Mô hình phi tuyến tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-30-credit-scoring.html">10. Credit Scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-35-caret.html">11. Xây dựng mô hình dự báo với caret</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-65-chat-luong-mo-hinh.html">12. Chất lượng mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-70-tidymodels.html">13. Tidymodels</a></li>
</ul>
<p class="caption"><span class="caption-text">Unsupervised learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p04-01-unsupervised-learning.html">1. Unsupervised learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-02-kmeans.html">2. k-means</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-03-hierarchical-clustering.html">3. Hierachical clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-04-basket-analysis.html">4. Phân tích giỏ hàng</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-05-pca.html">5. Principal component analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-06-factor-analysis.html">6. Phân tích nhân tố ẩn (factor analysis)</a></li>
</ul>
<p class="caption"><span class="caption-text">Chuỗi thời gian</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p05-01-chuoi-thoi-gian.html">1. Giới thiệu về chuỗi thời gian</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-02-arima.html">2. Mô hình ARIMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant.html">3. Phân tích chuỗi thời gian với tidyquant và timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-06-du-bao-ts-voi-prophet.html">4. Dự báo chuỗi thời gian với prophet</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-07-du-bao-ts-voi-timetk.html">5. Dự báo chuỗi thời gian với timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-08-abnomaly-detection.html">6. Abnomaly detection trong times series</a></li>
</ul>
<p class="caption"><span class="caption-text">Ngôn ngữ tự nghiên</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p06-01-nlp-co-ban.html">1. Xử lý ngôn ngữ tự nhiên cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-04-text-classification.html">2. Phân loại text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-07-nlp-api.html">3. Sử dụng API từ các dịch vụ đám mây</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-10-ocr-tesseract.html">4. OCR với <code class="docutils literal notranslate"><span class="pre">tesseract</span></code></a></li>
</ul>
<p class="caption"><span class="caption-text">Các phương pháp khác</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="p07-01-survival-analysis.html">1. Survival analysis</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Causal Impact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#gioi-thieu">2.1. Giới thiệu</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vi-du-1">2.2. Ví dụ 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vi-du-2">2.3. Ví dụ 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tai-lieu-tham-khao">2.4. Tài liệu tham khảo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="p07-03-collaborative-filtering.html">3. Collaborative Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-07-spatial-data.html">4. Spatial data</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-10-shiny.html">5. Shiny apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Deep Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p09-01-gioi-thieu-deep-learning.html">1. Giới thiệu cơ bản về Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-02-co-ban-kien-thuc-toan.html">2. Kiến thức cơ bản toán học cho deep learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-03-mo-hinh-deep-learning-co-ban.html">3. Mô hình deep learning cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-04-convolution-neural-network.html">4. Convolution neural networks</a></li>
</ul>
<p class="caption"><span class="caption-text">Cloud Computing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p10-01-cai-dat-rstudio-server-tren-amazon.html">1. Cài đặt server RStudio trên Amazon</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-03-web-service-azure.html">2. Xây dựng web service với Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-09-apis-voi-plumber.html">3. API với Plumber</a></li>
</ul>
<p class="caption"><span class="caption-text">Kiến thức bổ trợ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p11-01-git.html">1. Sử dụng GIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-02-cmd.html">2. CMD và Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-03-docker.html">3. Sử dụng docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-04-apis.html">4. API</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-05-html-css.html">5. Cơ bản về HTML và CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-09-other.html">6. Các tricks khác</a></li>
</ul>
<p class="caption"><span class="caption-text">Case studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p13-01-casestudy-truc-quan-hoa.html">1. Trực quan hóa dữ liệu</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Phân tích dữ liệu với R</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>2. Causal Impact</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/p07-02-causal-impact.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="causal-impact">
<h1>2. Causal Impact<a class="headerlink" href="#causal-impact" title="Permalink to this headline">¶</a></h1>
<div class="section" id="gioi-thieu">
<h2>2.1. Giới thiệu<a class="headerlink" href="#gioi-thieu" title="Permalink to this headline">¶</a></h2>
<p>Phương pháp này dùng để phân tích ảnh hưởng của sự kiện đến chuỗi thời
gian. Ví dụ:</p>
<ul class="simple">
<li>Thay đổi tag name của website ảnh hưởng đến organic traffic như thế
nào?</li>
<li>Thay đổi ASO ảnh hưởng đến organic download của app như thế nào?</li>
</ul>
<p><strong>Giả định</strong> (Assumption)</p>
<ul class="simple">
<li>Tồn tại cặp biến Y và X, trong đó Y là biến cần đo ảnh hưởng của sự
kiện A tại thời điểm t, X là biến tham chiếu (control variable). Mối
quan hệ giữa Y &amp; X có các giả định sau:<ul>
<li>X không bị ảnh hưởng bởi sự kiện A</li>
<li>Y &amp; X có mối tương quan và “covariate” không đổi theo thời gian</li>
</ul>
</li>
<li>Các khái niệm:<ul>
<li><code class="docutils literal notranslate"><span class="pre">Pred-period</span></code>: Thời gian trước khi xảy ra sự kiện A</li>
<li><code class="docutils literal notranslate"><span class="pre">Post-period</span></code>: Thời gian sau khi xảy ra sự kiện A</li>
<li><code class="docutils literal notranslate"><span class="pre">X</span></code>: Control variable</li>
</ul>
</li>
</ul>
<p><strong>Packages CausalImpact</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">devtools</span><span class="o">::</span><span class="nf">install_github</span><span class="p">(</span><span class="s">&quot;google/CausalImpact&quot;</span><span class="p">,</span> <span class="n">force</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="vi-du-1">
<h2>2.2. Ví dụ 1<a class="headerlink" href="#vi-du-1" title="Permalink to this headline">¶</a></h2>
<p>Tạo dữ liệu với 100 quan sát có tương quan không đổi theo thời gian x và
y. Từ quan sát thứ 71, xảy ra sự kiện A khiến y tăng thêm trung bình 10
đơn vị nhưng không ảnh hưởng đến x.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">CausalImpact</span><span class="p">)</span>
<span class="nf">set.seed</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
<span class="c1">#Tạo mô hình ARIMA(0.999,0,0) hay AR(0.999)</span>
<span class="n">x</span> <span class="o">&lt;-</span> <span class="m">100</span> <span class="o">+</span> <span class="nf">arima.sim</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">ar</span> <span class="o">=</span> <span class="m">0.999</span><span class="p">),</span> <span class="n">n</span> <span class="o">=</span> <span class="m">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">&lt;-</span> <span class="m">1.2</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">)</span>
<span class="n">y[71</span><span class="o">:</span><span class="m">100</span><span class="n">]</span> <span class="o">&lt;-</span> <span class="n">y[71</span><span class="o">:</span><span class="m">100</span><span class="n">]</span> <span class="o">+</span> <span class="m">10</span>
<span class="c1">#Tạo thời gian</span>
<span class="n">time.points</span> <span class="o">&lt;-</span> <span class="nf">seq.Date</span><span class="p">(</span><span class="nf">as.Date</span><span class="p">(</span><span class="s">&quot;2016-01-01&quot;</span><span class="p">),</span> <span class="n">by</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">length.out</span> <span class="o">=</span> <span class="m">100</span><span class="p">)</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="nf">zoo</span><span class="p">(</span><span class="nf">cbind</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span><span class="n">time.points</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##                   y        x</span>
<span class="c1">## 2016-01-01 105.2950 88.21513</span>
<span class="c1">## 2016-01-02 105.8943 88.48415</span>
<span class="c1">## 2016-01-03 106.6209 87.87684</span>
<span class="c1">## 2016-01-04 106.1572 86.77954</span>
<span class="c1">## 2016-01-05 101.2812 84.62243</span>
<span class="c1">## 2016-01-06 101.4484 84.60650</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">tail</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##                   y        x</span>
<span class="c1">## 2016-04-04 115.2148 88.23930</span>
<span class="c1">## 2016-04-05 114.9429 87.44356</span>
<span class="c1">## 2016-04-06 116.6694 86.95103</span>
<span class="c1">## 2016-04-07 112.5801 85.43364</span>
<span class="c1">## 2016-04-08 111.3394 85.65532</span>
<span class="c1">## 2016-04-09 114.3264 85.10503</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">matplot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">type</span> <span class="o">=</span> <span class="s">&quot;l&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image0" src="p07-02-causal-impact_files/figure-html/unnamed-chunk-3-1.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Xác định thời gian xảy ra sự kiện</span>
<span class="n">pre.period</span> <span class="o">&lt;-</span> <span class="nf">as.Date</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;2016-01-01&quot;</span><span class="p">,</span> <span class="s">&quot;2016-03-11&quot;</span><span class="p">))</span>
<span class="n">post.period</span> <span class="o">&lt;-</span> <span class="nf">as.Date</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;2016-03-12&quot;</span><span class="p">,</span> <span class="s">&quot;2016-04-09&quot;</span><span class="p">))</span>
<span class="c1">#Chạy mô hình</span>
<span class="n">impact</span> <span class="o">&lt;-</span> <span class="nf">CausalImpact</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pre.period</span><span class="p">,</span> <span class="n">post.period</span><span class="p">)</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">impact</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image1" src="p07-02-causal-impact_files/figure-html/unnamed-chunk-3-2.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">summary</span><span class="p">(</span><span class="n">impact</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## Posterior inference {CausalImpact}</span>
<span class="c1">##</span>
<span class="c1">##                          Average        Cumulative</span>
<span class="c1">## Actual                   117            3394</span>
<span class="c1">## Prediction (s.d.)        107 (0.51)     3100 (14.72)</span>
<span class="c1">## 95% CI                   [106, 108]     [3070, 3128]</span>
<span class="c1">##</span>
<span class="c1">## Absolute effect (s.d.)   10 (0.51)      294 (14.72)</span>
<span class="c1">## 95% CI                   [9.2, 11]      [265.8, 324]</span>
<span class="c1">##</span>
<span class="c1">## Relative effect (s.d.)   9.5% (0.47%)   9.5% (0.47%)</span>
<span class="c1">## 95% CI                   [8.6%, 10%]    [8.6%, 10%]</span>
<span class="c1">##</span>
<span class="c1">## Posterior tail-area probability p:   0.00111</span>
<span class="c1">## Posterior prob. of a causal effect:  99.88901%</span>
<span class="c1">##</span>
<span class="c1">## For more details, type: summary(impact, &quot;report&quot;)</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">summary</span><span class="p">(</span><span class="n">impact</span><span class="p">,</span> <span class="s">&quot;report&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## Analysis report {CausalImpact}</span>
<span class="c1">##</span>
<span class="c1">##</span>
<span class="c1">## During the post-intervention period, the response variable had an average value of approx. 117. By contrast, in the absence of an intervention, we would have expected an average response of 107. The 95% interval of this counterfactual prediction is [106, 108]. Subtracting this prediction from the observed response yields an estimate of the causal effect the intervention had on the response variable. This effect is 10 with a 95% interval of [9, 11]. For a discussion of the significance of this effect, see below.</span>
<span class="c1">##</span>
<span class="c1">## Summing up the individual data points during the post-intervention period (which can only sometimes be meaningfully interpreted), the response variable had an overall value of 3.39K. By contrast, had the intervention not taken place, we would have expected a sum of 3.1K. The 95% interval of this prediction is [3.07K, 3.13K].</span>
<span class="c1">##</span>
<span class="c1">## The above results are given in terms of absolute numbers. In relative terms, the response variable showed an increase of +9%. The 95% interval of this percentage is [+9%, +10%].</span>
<span class="c1">##</span>
<span class="c1">## This means that the positive effect observed during the intervention period is statistically significant and unlikely to be due to random fluctuations. It should be noted, however, that the question of whether this increase also bears substantive significance can only be answered by comparing the absolute effect (10) to the original goal of the underlying intervention.</span>
<span class="c1">##</span>
<span class="c1">## The probability of obtaining this effect by chance is very small (Bayesian one-sided tail-area probability p = 0.001). This means the causal effect can be considered statistically significant.</span>
</pre></div>
</div>
<p><strong>Giải thích</strong></p>
<ul class="simple">
<li>Giá trị trung bình của chuỗi y đo được là 117 trong khi dự báo nếu
không xảy ra A, y chỉ có gia trị 107</li>
<li>Ảnh hưởng (effect) của A lên y là 10 đơn vị/ngày. Trong toàn bộ giai
đoạn là 294</li>
</ul>
</div>
<div class="section" id="vi-du-2">
<h2>2.3. Ví dụ 2<a class="headerlink" href="#vi-du-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="m">100</span> <span class="o">+</span> <span class="nf">arima.sim</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">ar</span> <span class="o">=</span> <span class="m">0.999</span><span class="p">),</span> <span class="n">n</span> <span class="o">=</span> <span class="m">120</span><span class="p">)</span>
<span class="n">x[101</span><span class="o">:</span><span class="m">120</span><span class="n">]</span> <span class="o">&lt;-</span> <span class="m">110</span> <span class="o">+</span> <span class="nf">arima.sim</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">ar</span> <span class="o">=</span> <span class="m">0.999</span><span class="p">),</span> <span class="n">n</span> <span class="o">=</span> <span class="m">20</span><span class="p">)</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image2" src="p07-02-causal-impact_files/figure-html/unnamed-chunk-4-1.png" /></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">&lt;-</span> <span class="m">1.2</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">120</span><span class="p">)</span>
<span class="n">y[101</span><span class="o">:</span><span class="m">120</span><span class="n">]</span> <span class="o">&lt;-</span> <span class="m">1.1</span><span class="o">*</span><span class="n">y[101</span><span class="o">:</span><span class="m">120</span><span class="n">]</span> <span class="o">+</span> <span class="m">10</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="nf">cbind</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="n">pre.period</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">100</span><span class="p">)</span>
<span class="n">post.period</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">101</span><span class="p">,</span> <span class="m">120</span><span class="p">)</span>
<span class="n">impact</span> <span class="o">&lt;-</span> <span class="nf">CausalImpact</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pre.period</span><span class="p">,</span> <span class="n">post.period</span><span class="p">)</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">impact</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image3" src="p07-02-causal-impact_files/figure-html/unnamed-chunk-4-2.png" /></p>
</div>
<div class="section" id="tai-lieu-tham-khao">
<h2>2.4. Tài liệu tham khảo<a class="headerlink" href="#tai-lieu-tham-khao" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/google/CausalImpact/blob/master/CausalImpact.Rmd">Google Causal
Impact</a></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="p07-03-collaborative-filtering.html" class="btn btn-neutral float-right" title="3. Collaborative Filtering" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="p07-01-survival-analysis.html" class="btn btn-neutral float-left" title="1. Survival analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Anh Hoang Duc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>