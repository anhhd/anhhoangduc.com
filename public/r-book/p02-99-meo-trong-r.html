

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="vi" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="vi" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>13. Các mẹo trong R &mdash; Tài liệu Phân tích dữ liệu với R 2019</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2019',
              LANGUAGE:'vi',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Tìm Kiếm" href="search.html" />
    <link rel="next" title="1. Các nguyên lý dự báo" href="p03-01-nguyen-ly-du-bao.html" />
    <link rel="prev" title="12. Thu thập dữ liệu từ website" href="p02-60-thu-thap-du-lieu-tu-website.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Phân tích dữ liệu với R
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Giới thiệu</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p01-01-gioi-thieu.html">Khoa học dữ liệu và nghề phân tích dữ liệu</a></li>
</ul>
<p class="caption"><span class="caption-text">Phân tích khám phá dữ liệu</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="p02-03-bien-doi-du-lieu-dplyr.html">1. Ngữ pháp của biến đổi dữ liệu với DPLYR</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-04-phan-ra-va-xoay-chieu-du-lieu.html">2. Phân rã và xoay chiều dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-05-cac-chi-so-thong-ke.html">3. Các chỉ số thống kê mô tả cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-06-lap-trinh-ham.html">4. Lập trình hàm</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-07-lap-trinh-ham-voi-purrr.html">5. Lập trình chức năng hàm với purrr</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-08-bien-doi-du-lieu-text.html">6. Biến đổi dữ liệu text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-11-quan-ly-nhieu-mo-hinh.html">7. Quản lý kết quả phân tích từ nhiều mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-15-thong-ke-co-ban.html">8. Xác suất và phân phối thống kê cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-16-power-analysis.html">9. Power analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-20-sampling-methods.html">10. Phương pháp ước lượng lấy mẫu</a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-50-datatable.html">11. Biến đổi dữ liệu với <code class="docutils literal notranslate"><span class="pre">data.table</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="p02-60-thu-thap-du-lieu-tu-website.html">12. Thu thập dữ liệu từ website</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">13. Các mẹo trong R</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hien-thi-so-binh-thuong">13.1. Hiển thị số bình thường</a></li>
<li class="toctree-l2"><a class="reference internal" href="#export-du-lieu-ra-excel">13.2. Export dữ liệu ra excel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lam-viec-khi-proxy-bi-chan">13.3. Làm việc khi proxy bị chặn</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tu-dong-chay-r-script-theo-lich">13.4. Tự động chạy R-script theo lịch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dua-tham-so-tu-cmd-vao-r">13.5. Đưa tham số tử CMD vào R</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tao-script-tu-dong-tao-header-thuc-hien-code">13.6. Tạo script tự động tạo header &amp; thực hiện code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#doc-nhieu-file-co-cung-cau-truc-du-lieu-trong-mot-thu-muc">13.7. Đọc nhiều file có cùng cấu trúc dữ liệu trong một thư mục</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wrap-bieu-do-co-factor-qua-dai">13.8. Wrap biểu đồ có factor quá dài</a></li>
<li class="toctree-l2"><a class="reference internal" href="#doc-du-lieu-utf-8-tren-r">13.9. Đọc dữ liệu UTF-8 trên R</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kiem-tra-locale-tren-r">13.10. Kiểm tra locale trên R</a></li>
<li class="toctree-l2"><a class="reference internal" href="#khong-save-duoc-ky-tu-utf-8-voi-pdf-hoac-render-tu-rmarkdown-ra-pdf">13.11. Không save được ký tự UTF-8 với PDF hoặc render từ rmarkdown ra PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="#thay-doi-thu-vien-mac-dinh-tren-r">13.12. Thay đổi thư viện mặc định trên R</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xoa-file-luu-tru-tren-may-tinh-tu-r">13.13. Xóa file lưu trữ trên máy tính từ R</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cai-dat-qua-proxy">13.14. Cài đặt qua proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kiem-tra-cac-file-chua-trong-1-folder">13.15. Kiểm tra các file chứa trong 1 folder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-tat-ca-dataframe-trong-1-thu-muc">13.16. Load tất cả dataframe trong 1 thư mục</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gan-mot-dataframe-vao-1-bien">13.17. Gán một dataframe vào 1 biến</a></li>
<li class="toctree-l2"><a class="reference internal" href="#goi-mot-dataframe-tu-bien">13.18. Gọi một dataframe từ biến</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rbind-tat-ca-cac-dataframe">13.19. Rbind tất cả các dataframe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remove-tat-ca-tru-1-file">13.20. Remove tất cả trừ 1 file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xem-location-cua-file-script-dang-mo">13.21. Xem location của file script đang mở</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chay-mot-doan-r-tu-bat">13.22. Chạy một đoạn R từ bat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tu-dong-render-ra-ket-qua-phan-tich">13.23. Tự động render ra kết quả phân tích</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Supervised learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p03-01-nguyen-ly-du-bao.html">1. Các nguyên lý dự báo</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-02-mo-hinh-ols.html">2. Mô hình OLS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-03-logistic-regression.html">3. Mô hình hồi quy logistic</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-04-decision-tree.html">4. Cây quyết định</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-05-bagging-boosting.html">5. Bagging, RandomForest và Boosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-07-xay-dung-mo-hinh-voi-h2o.html">6. Xây dựng mô hình với H2O</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-08-svm.html">7. Support Vector Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-09-feature-engineering.html">8. Feature Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-15-regularization.html">9. Regularization</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-17-nonlinear.html">10. Mô hình phi tuyến tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-30-credit-scoring.html">11. Credit Scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-35-caret.html">12. Xây dựng mô hình dự báo với caret</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-65-chat-luong-mo-hinh.html">13. Chất lượng mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="p03-70-tidymodels.html">14. Tidymodels</a></li>
</ul>
<p class="caption"><span class="caption-text">Unsupervised learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p04-01-unsupervised-learning.html">1. Unsupervised learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-02-kmeans.html">2. k-means</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-03-hierarchical-clustering.html">3. Hierachical clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-04-basket-analysis.html">4. Phân tích giỏ hàng</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-05-pca.html">5. Principal component analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p04-06-factor-analysis.html">6. Phân tích nhân tố ẩn (factor analysis)</a></li>
</ul>
<p class="caption"><span class="caption-text">Chuỗi thời gian</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p05-01-chuoi-thoi-gian.html">1. Giới thiệu về chuỗi thời gian</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-02-arima.html">2. Mô hình ARIMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant.html">3. Phân tích chuỗi thời gian với tidyquant và timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-06-du-bao-ts-voi-prophet.html">4. Dự báo chuỗi thời gian với prophet</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-07-du-bao-ts-voi-timetk.html">5. Dự báo chuỗi thời gian với timetk</a></li>
<li class="toctree-l1"><a class="reference internal" href="p05-08-abnomaly-detection.html">6. Abnomaly detection trong times series</a></li>
</ul>
<p class="caption"><span class="caption-text">Ngôn ngữ tự nghiên</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p06-01-nlp-co-ban.html">1. Xử lý ngôn ngữ tự nhiên cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-04-text-classification.html">2. Phân loại text</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-07-nlp-api.html">3. Sử dụng API từ các dịch vụ đám mây</a></li>
<li class="toctree-l1"><a class="reference internal" href="p06-10-ocr-tesseract.html">4. OCR với <code class="docutils literal notranslate"><span class="pre">tesseract</span></code></a></li>
</ul>
<p class="caption"><span class="caption-text">Các phương pháp khác</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p07-01-survival-analysis.html">1. Survival analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-02-causal-impact.html">2. Causal Impact</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-03-collaborative-filtering.html">3. Collaborative Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-07-spatial-data.html">4. Spatial data</a></li>
<li class="toctree-l1"><a class="reference internal" href="p07-10-shiny.html">5. Shiny apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Deep Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p09-01-gioi-thieu-deep-learning.html">1. Giới thiệu cơ bản về Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-02-co-ban-kien-thuc-toan.html">2. Kiến thức cơ bản toán học cho deep learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-03-mo-hinh-deep-learning-co-ban.html">3. Mô hình deep learning cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="p09-04-convolution-neural-network.html">4. Convolution neural networks</a></li>
</ul>
<p class="caption"><span class="caption-text">Cloud Computing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p10-01-cai-dat-rstudio-server-tren-amazon.html">1. Cài đặt server RStudio trên Amazon</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-03-web-service-azure.html">2. Xây dựng web service với Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="p10-09-apis-voi-plumber.html">3. API với Plumber</a></li>
</ul>
<p class="caption"><span class="caption-text">Kiến thức bổ trợ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p11-01-git.html">1. Sử dụng GIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-02-cmd.html">2. CMD và Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-03-docker.html">3. Sử dụng docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-04-apis.html">4. API</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-05-html-css.html">5. Cơ bản về HTML và CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="p11-09-other.html">6. Các tricks khác</a></li>
</ul>
<p class="caption"><span class="caption-text">Case studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p13-01-casestudy-truc-quan-hoa.html">1. Trực quan hóa dữ liệu</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Phân tích dữ liệu với R</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>13. Các mẹo trong R</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/p02-99-meo-trong-r.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="cac-meo-trong-r">
<h1>13. Các mẹo trong R<a class="headerlink" href="#cac-meo-trong-r" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hien-thi-so-binh-thuong">
<h2>13.1. Hiển thị số bình thường<a class="headerlink" href="#hien-thi-so-binh-thuong" title="Permalink to this headline">¶</a></h2>
<p><strong>Vấn đề</strong>: Khi sử dụng R, dữ liệu thường xuyên hiển thị dưới dạng khoa
học (scientific).</p>
<p><strong>Giải pháp</strong>: Sử dụng options <code class="docutils literal notranslate"><span class="pre">options(scipen</span> <span class="pre">=</span> <span class="pre">999)</span></code> để bỏ hiển thị
dạng khoa học trong R</p>
</div>
<div class="section" id="export-du-lieu-ra-excel">
<h2>13.2. Export dữ liệu ra excel<a class="headerlink" href="#export-du-lieu-ra-excel" title="Permalink to this headline">¶</a></h2>
<p><strong>Vấn đề</strong>: Export dữ liệu từ dataframe ra excel <strong>Giải pháp</strong>: Sử dụng
<code class="docutils literal notranslate"><span class="pre">openxlsx</span></code> để export dữ liệu từ dataframe ra excel</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>openxlsx<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>tidyverse<span class="p">)</span>

<span class="c1"># Tạo dữ liệu ----</span>

df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span><span class="s">&quot;Date&quot;</span> <span class="o">=</span> <span class="kp">Sys.Date</span><span class="p">()</span><span class="m">-0</span><span class="o">:</span><span class="m">4</span><span class="p">,</span>
                 <span class="s">&quot;Logical&quot;</span> <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">),</span>
                 <span class="s">&quot;Currency&quot;</span> <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">,</span><span class="m">-2</span><span class="o">:</span><span class="m">2</span><span class="p">),</span>
                 <span class="s">&quot;Accounting&quot;</span> <span class="o">=</span> <span class="m">-2</span><span class="o">:</span><span class="m">2</span><span class="p">,</span>
                 <span class="s">&quot;hLink&quot;</span> <span class="o">=</span> <span class="s">&quot;https://CRAN.R-project.org/&quot;</span><span class="p">,</span>
                 <span class="s">&quot;Percentage&quot;</span> <span class="o">=</span> <span class="kp">seq</span><span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> length.out<span class="o">=</span><span class="m">5</span><span class="p">),</span>
                 <span class="s">&quot;TinyNumber&quot;</span> <span class="o">=</span> runif<span class="p">(</span><span class="m">5</span><span class="p">)</span> <span class="o">/</span> <span class="m">1E9</span><span class="p">,</span> stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
df<span class="o">$</span>Date <span class="o">&lt;-</span> df<span class="o">$</span>Date <span class="o">%&gt;%</span> <span class="kp">as.character</span><span class="p">()</span>
<span class="kp">class</span><span class="p">(</span>df<span class="o">$</span>Currency<span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;currency&quot;</span>
<span class="kp">class</span><span class="p">(</span>df<span class="o">$</span>Accounting<span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;accounting&quot;</span>
<span class="kp">class</span><span class="p">(</span>df<span class="o">$</span>hLink<span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;hyperlink&quot;</span>
<span class="kp">class</span><span class="p">(</span>df<span class="o">$</span>Percentage<span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;percentage&quot;</span>
<span class="kp">class</span><span class="p">(</span>df<span class="o">$</span>TinyNumber<span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;scientific&quot;</span>

<span class="c1">## Format ----</span>
<span class="kp">options</span><span class="p">(</span><span class="s">&quot;openxlsx.borderStyle&quot;</span> <span class="o">=</span> <span class="s">&quot;thin&quot;</span><span class="p">)</span>
<span class="kp">options</span><span class="p">(</span><span class="s">&quot;openxlsx.borderColour&quot;</span> <span class="o">=</span> <span class="s">&quot;#4F81BD&quot;</span><span class="p">)</span>

<span class="c1">## Heading format</span>
hs1 <span class="o">&lt;-</span> createStyle<span class="p">(</span>fgFill <span class="o">=</span> <span class="s">&quot;darkgreen&quot;</span><span class="p">,</span>
                   halign <span class="o">=</span> <span class="s">&quot;CENTER&quot;</span><span class="p">,</span> textDecoration <span class="o">=</span> <span class="s">&quot;Bold&quot;</span><span class="p">,</span>
                   border <span class="o">=</span> <span class="s">&quot;Bottom&quot;</span><span class="p">,</span> fontColour <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">)</span>

<span class="c1">## Insert data (simple) ----</span>
wb <span class="o">&lt;-</span> createWorkbook<span class="p">()</span>
addWorksheet<span class="p">(</span>wb<span class="p">,</span> <span class="s">&quot;writeData auto-formatting&quot;</span><span class="p">)</span>

writeData<span class="p">(</span>wb<span class="p">,</span> <span class="m">1</span><span class="p">,</span> df<span class="p">,</span> startRow <span class="o">=</span> <span class="m">1</span><span class="p">,</span> startCol <span class="o">=</span> <span class="m">1</span><span class="p">,</span> headerStyle <span class="o">=</span> hs1<span class="p">,</span>
          borders <span class="o">=</span> <span class="s">&quot;rows&quot;</span><span class="p">,</span> borderStyle <span class="o">=</span> <span class="s">&quot;thin&quot;</span><span class="p">)</span>

<span class="c1">## Thêm dữ liệu (datatable)</span>

addWorksheet<span class="p">(</span>wb<span class="p">,</span> <span class="s">&quot;Sheet2&quot;</span><span class="p">)</span>
setColWidths<span class="p">(</span>wb<span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="p">,</span> widths <span class="o">=</span> <span class="s">&quot;auto&quot;</span><span class="p">)</span>

writeDataTable<span class="p">(</span>wb<span class="p">,</span> <span class="m">2</span><span class="p">,</span> df<span class="p">,</span> startRow <span class="o">=</span> <span class="m">1</span><span class="p">,</span> startCol <span class="o">=</span> <span class="m">1</span><span class="p">,</span>
               tableStyle <span class="o">=</span> <span class="s">&quot;TableStyleLight1&quot;</span><span class="p">,</span>
               headerStyle <span class="o">=</span> hs1<span class="p">,</span>
               withFilter <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
openXL<span class="p">(</span>wb<span class="p">)</span>

<span class="c1">## Xóa gridLine cho tât cả các sheet ----</span>

<span class="m">1</span><span class="o">:</span><span class="kp">length</span><span class="p">(</span>wb<span class="o">$</span>sheet_names<span class="p">)</span> <span class="o">%&gt;%</span>
  map<span class="p">(</span>as_mapper<span class="p">(</span><span class="kr">function</span><span class="p">(</span>x<span class="p">){</span>
    showGridLines<span class="p">(</span>wb<span class="p">,</span> x<span class="p">,</span> showGridLines <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
  <span class="p">}))</span>

<span class="c1"># Lưu dữ liệu ----</span>
saveWorkbook<span class="p">(</span>wb<span class="p">,</span> file <span class="o">=</span> <span class="s">&quot;my_file.xlsx&quot;</span><span class="p">,</span> overwrite <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="lam-viec-khi-proxy-bi-chan">
<h2>13.3. Làm việc khi proxy bị chặn<a class="headerlink" href="#lam-viec-khi-proxy-bi-chan" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Sửa option chọn mặc định proxy: <code class="docutils literal notranslate"><span class="pre">Tools-Global</span></code> &gt;&gt;
<code class="docutils literal notranslate"><span class="pre">Options-Packages</span></code> &gt;&gt; Uncheck
<code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">Internet</span> <span class="pre">Explorer</span> <span class="pre">library/proxy</span> <span class="pre">for</span> <span class="pre">HTTP</span></code></li>
<li>Restart lại R</li>
<li>Gõ câu lệnh <code class="docutils literal notranslate"><span class="pre">file.edit('~/.Renviron')</span></code></li>
<li>Thêm nội dung sau vào trong R</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kp">options</span><span class="p">(</span>internet.info <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
http_proxy<span class="o">=</span><span class="s">&quot;http://user_id:password@your_proxy:your_port&quot;</span>
<span class="c1"># Ví dụ</span>
http_proxy<span class="o">=</span><span class="s">&quot;http://anhhd3:password*@10.128.10.88:8080&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tu-dong-chay-r-script-theo-lich">
<h2>13.4. Tự động chạy R-script theo lịch<a class="headerlink" href="#tu-dong-chay-r-script-theo-lich" title="Permalink to this headline">¶</a></h2>
<p><strong>Cách 1</strong>: Sử dụng package taskscheduleR</p>
<ul class="simple">
<li>Cài packages “taskscheduleR”</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>devtools<span class="o">::</span>install_github<span class="p">(</span><span class="s">&quot;jwijffels/taskscheduleR&quot;</span><span class="p">,</span> force <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>taskscheduleR<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Sử dụng add-in: Tools &gt;&gt; Addin &gt;&gt; Schedule R Script</li>
<li>Lựa chọn Script cần chạy</li>
</ul>
<p><strong>Cách 2</strong>: Chạy Rscript trên file bat, đặt lịch với Task Schedule của
Windows</p>
<ul class="simple">
<li>Bước 1: Tạo file.bat có câu lệnh sau:</li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">echo</span> off
<span class="s2">&quot;C:\Program Files\R\R-3.2.5\bin\x64\R.exe&quot;</span> CMD BATCH --vanilla --slave <span class="s2">&quot;C:\Users\MyPC\Desktop\Automation\task.R&quot;</span>
</pre></div>
</div>
<p>Hoặc</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">echo</span> off
<span class="s2">&quot;C:\Program Files\R\R-3.2.5\bin\x64\Rscript.exe&quot;</span> <span class="s2">&quot;C:\Users\MyPC\Desktop\Automation\task.R&quot;</span>
</pre></div>
</div>
<p>Trong đó: -
“C:<a href="#id1"><span class="problematic" id="id2">:raw-latex:`\Program `Files:raw-latex:`</span></a>R`:raw-latex:<cite>R</cite>-3.2.5:raw-latex:<cite>bin</cite><a href="#id3"><span class="problematic" id="id4">:raw-latex:`\x`64:raw-latex:`</span></a>R`.exe”
là đường dẫn chạy file R.exe -
“C:<a href="#id5"><span class="problematic" id="id6">:raw-latex:`\Users`</span></a><a href="#id7"><span class="problematic" id="id8">:raw-latex:`\MyPC`</span></a><a href="#id9"><span class="problematic" id="id10">:raw-latex:`\Desktop`</span></a><a href="#id11"><span class="problematic" id="id12">:raw-latex:`\Automation`</span></a><a href="#id13"><span class="problematic" id="id14">:raw-latex:`\task`</span></a>.R”
là đường dẫn của script cần đặt lịch</p>
<ul class="simple">
<li>Bước 2: Sử dụng Windows Task Schedule:<ul>
<li>Khởi động “Task Schedule”</li>
<li>Tạo task mới: “Create basic task”</li>
<li>Chọn action: “Start a program”</li>
<li>Chọn script dẫn đến file.bat đã tạo</li>
</ul>
</li>
</ul>
<p><strong>Tham khảo</strong>: Xem folder Automation</p>
<p><strong>Lưu ý</strong>: Nếu file script R để tạo report với Rmarkdown, ta cần cài đặt
pandoc trước.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>install.packages<span class="p">(</span><span class="s">&quot;installr&quot;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>installr<span class="p">)</span>
install.pandoc<span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="dua-tham-so-tu-cmd-vao-r">
<h2>13.5. Đưa tham số tử CMD vào R<a class="headerlink" href="#dua-tham-so-tu-cmd-vao-r" title="Permalink to this headline">¶</a></h2>
<p><strong>Vấn đề</strong>: Khi tạo theo project, file R script không thể chạy tự động
với đường dẫn tương đối (copy thư mục từ phần này sang phần khác vẫn
chạy) trong file .bat</p>
<p><strong>Giải quyết</strong>:</p>
<ul class="simple">
<li>Tạo file <strong>bat</strong> và truyền tham số thư mục của file bat vào R</li>
</ul>
<p><strong>File bat</strong></p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">echo</span> off
<span class="s2">&quot;C:\Program Files\R\R-3.3.1\bin\x64\Rscript.exe&quot;</span> <span class="nv">%cd%</span>/<span class="s2">&quot;test_script.R&quot;</span> <span class="nv">%cd%</span>
</pre></div>
</div>
<p>Trong đó:</p>
<ul class="simple">
<li><strong>“C::raw-latex:`Program `Files:raw-latex:`R`:raw-latex:`R`-3.3.1:raw-latex:`bin`:raw-latex:`x`64:raw-latex:`Rscript`.exe”</strong>:
Đường dẫn vào thư mục chạy R</li>
<li><strong>%cd%/“test_script.R”</strong>: Đường dẫn tương đối của %cd% để chạy file
<em>test_script.R</em></li>
<li><strong>%cd%</strong>: Tham số đường dẫn thư mục</li>
</ul>
<p><strong>File R</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>args <span class="o">&lt;-</span> <span class="kp">commandArgs</span><span class="p">(</span>trailingOnly<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="kr">if</span> <span class="p">(</span><span class="kp">length</span><span class="p">(</span><span class="kp">args</span><span class="p">)</span> <span class="o">!=</span> <span class="m">0</span><span class="p">){</span>
  <span class="kp">setwd</span><span class="p">(</span><span class="kp">args</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Truyền tham số %cd% vào R script. Nếu tham số rỗng (length = 0), giữ
nguyên directory. Nêu tham số khác 0, đặt working directory là tham
số được truyền vào</li>
</ul>
</div>
<div class="section" id="tao-script-tu-dong-tao-header-thuc-hien-code">
<h2>13.6. Tạo script tự động tạo header &amp; thực hiện code<a class="headerlink" href="#tao-script-tu-dong-tao-header-thuc-hien-code" title="Permalink to this headline">¶</a></h2>
<p><strong>Vấn đề</strong>:</p>
<ul class="simple">
<li>Cho phép tự động hóa toàn bộ quá trình tạo các phân tích tự động</li>
<li>Xem thêm thư mục <strong>Automation multiple reports</strong></li>
<li>Tham khảo
<a class="reference external" href="https://github.com/ramnathv/htmlwidgets/pull/110">Github</a></li>
</ul>
</div>
<div class="section" id="doc-nhieu-file-co-cung-cau-truc-du-lieu-trong-mot-thu-muc">
<h2>13.7. Đọc nhiều file có cùng cấu trúc dữ liệu trong một thư mục<a class="headerlink" href="#doc-nhieu-file-co-cung-cau-truc-du-lieu-trong-mot-thu-muc" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Load multiple data in R with the same structure of variables (column)</span>
<span class="c1">#Create a function in R regarding path destination</span>
load_data <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>path<span class="p">)</span> <span class="p">{</span>
  files <span class="o">&lt;-</span> <span class="kp">dir</span><span class="p">(</span>path<span class="p">,</span> pattern <span class="o">=</span> <span class="s">&#39;\\.csv&#39;</span><span class="p">,</span> full.names <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
  tables <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span>files<span class="p">,</span> read.csv<span class="p">)</span>
  <span class="kp">do.call</span><span class="p">(</span><span class="kp">rbind</span><span class="p">,</span> tables<span class="p">)</span>
<span class="p">}</span>

<span class="c1">#Read data from the path</span>
Example_data<span class="o">&lt;-</span>load_data<span class="p">(</span><span class="s">&quot;C:/Users/anhhd2/Desktop/App downloads data&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="wrap-bieu-do-co-factor-qua-dai">
<h2>13.8. Wrap biểu đồ có factor quá dài<a class="headerlink" href="#wrap-bieu-do-co-factor-qua-dai" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Problem</strong>: Một số factor quá dài, khi lên biểu đồ bị chèn chữ</li>
<li><strong>Solution</strong>: Sử dụng package <strong>stringr</strong>, hàm <strong>str_wrap</strong></li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>stringr<span class="p">)</span>
data <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Trung tam kinh doanh dien tu dien may&quot;</span><span class="p">,</span> <span class="s">&quot;Viet Nam&quot;</span><span class="p">,</span> <span class="s">&quot;Cong hoa xa hoi chu nghia Viet Nam&quot;</span><span class="p">),</span>
                   y <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">7</span><span class="p">))</span>

<span class="c1">#Vấn đề với biểu đồ thường</span>
p <span class="o">&lt;-</span> ggplot<span class="p">(</span>data<span class="p">,</span> aes<span class="p">(</span>x<span class="p">,</span> y<span class="p">))</span> <span class="o">+</span> geom_bar<span class="p">(</span>stat <span class="o">=</span> <span class="s">&quot;identity&quot;</span><span class="p">,</span> aes<span class="p">(</span>fill <span class="o">=</span> x<span class="p">))</span>
<span class="c1">#Giải pháp với str_wrap</span>
p <span class="o">+</span> scale_x_discrete<span class="p">(</span>labels <span class="o">=</span> str_wrap<span class="p">(</span><span class="kp">levels</span><span class="p">(</span>data<span class="o">$</span>x<span class="p">),</span> width <span class="o">=</span> <span class="m">20</span><span class="p">))</span> <span class="o">+</span>
  ggtitle<span class="p">(</span>str_wrap<span class="p">(</span><span class="s">&quot;Viet Nam que huong toi rat trong xanh nhieu may&quot;</span><span class="p">,</span> width <span class="o">=</span> <span class="m">25</span><span class="p">))</span>
</pre></div>
</div>
<p><img alt="image0" src="p02-99-meo-trong-r_files/figure-html/unnamed-chunk-11-1.png" /></p>
</div>
<div class="section" id="doc-du-lieu-utf-8-tren-r">
<h2>13.9. Đọc dữ liệu UTF-8 trên R<a class="headerlink" href="#doc-du-lieu-utf-8-tren-r" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>R <strong>KHÔNG</strong> hỗ trợ đọc dữ liệu có ký tự UTF-8 trên data frame</li>
<li>R hỗ trợ dữ liệu UTF-8 dạng vector hoặc list trên Windows, đây là lỗi
của Windows. Khi chạy R trên Ubuntu hoặc MacOS, kết quả hiển thị dạng
bình thường</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>x<span class="o">&lt;-</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Đức Anh&quot;</span><span class="p">,</span> <span class="s">&quot;Việt Nam&quot;</span><span class="p">,</span> <span class="s">&quot;Dịch vụ&quot;</span><span class="p">)</span>
y<span class="o">&lt;-</span><span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">)</span>
z<span class="o">&lt;-</span><span class="kt">data.frame</span><span class="p">(</span>x<span class="p">,</span>y<span class="p">)</span>
<span class="c1">#z không hiển thị được UTF-8</span>
z
<span class="c1">#Biến x (vector) thể hiện được</span>
<span class="kp">as.character</span><span class="p">(</span>z<span class="o">$</span>x<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="kiem-tra-locale-tren-r">
<h2>13.10. Kiểm tra locale trên R<a class="headerlink" href="#kiem-tra-locale-tren-r" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Kiểm tra đọc dữ liệu UTF-8</span>
<span class="kp">l10n_info</span><span class="p">()</span>

<span class="c1">#Đọc dữ liệu UTF-8</span>
<span class="kp">options</span><span class="p">(</span>RCurlOptions <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>cainfo <span class="o">=</span> <span class="kp">system.file</span><span class="p">(</span><span class="s">&quot;CurlSSL&quot;</span><span class="p">,</span> <span class="s">&quot;cacert.pem&quot;</span><span class="p">,</span> package <span class="o">=</span> <span class="s">&quot;RCurl&quot;</span><span class="p">)))</span>
<span class="kp">Sys.setlocale</span><span class="p">(</span><span class="s">&quot;LC_CTYPE&quot;</span><span class="p">,</span> <span class="s">&quot;vi_VI.UTF-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="khong-save-duoc-ky-tu-utf-8-voi-pdf-hoac-render-tu-rmarkdown-ra-pdf">
<h2>13.11. Không save được ký tự UTF-8 với PDF hoặc render từ rmarkdown ra PDF<a class="headerlink" href="#khong-save-duoc-ky-tu-utf-8-voi-pdf-hoac-render-tu-rmarkdown-ra-pdf" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Sử dụng packages “Cairo”, thêm options <strong>dev = “CairoPDF”</strong></li>
</ul>
</div>
<div class="section" id="thay-doi-thu-vien-mac-dinh-tren-r">
<h2>13.12. Thay đổi thư viện mặc định trên R<a class="headerlink" href="#thay-doi-thu-vien-mac-dinh-tren-r" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Vấn đề</strong>: Tự động đổi thư viện cài đặt trên R</li>
<li><strong>Xử lý</strong>:<ul>
<li>Copy file Rprofile ra ngoài Desktop: <strong>C:/Program
Files/R/R-3.3.1/library/base/R</strong></li>
<li>Thêm câu lệnh: <strong>.libPaths(“Đường dẫn về library”)</strong></li>
<li>Copy đè vào thư mục gốc</li>
<li>Khởi động lại R</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="xoa-file-luu-tru-tren-may-tinh-tu-r">
<h2>13.13. Xóa file lưu trữ trên máy tính từ R<a class="headerlink" href="#xoa-file-luu-tru-tren-may-tinh-tu-r" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Vấn đề</strong>: Muốn xóa các file trung gian lưu trữ trên máy tính trong
quá trình thực hiện code</li>
<li><strong>Xử lý</strong>: Thực hiện đoạn code sau</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Bước 1: Khai báo file muốn xóa</span>
fn <span class="o">&lt;-</span> <span class="s">&quot;transaction.txt&quot;</span>
<span class="c1">#Bước 2: Xóa file đã khai báo</span>
<span class="kr">if</span><span class="p">(</span><span class="kp">file.exists</span><span class="p">(</span>fn<span class="p">))</span> <span class="kp">file.remove</span><span class="p">(</span>fn<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="cai-dat-qua-proxy">
<h2>13.14. Cài đặt qua proxy<a class="headerlink" href="#cai-dat-qua-proxy" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Cách 1</span>
<span class="kn">library</span><span class="p">(</span>downloader<span class="p">)</span>

<span class="c1">#Sửa lại tên và đường dẫn theo github</span>
download<span class="p">(</span><span class="s">&quot;https://github.com/hoxo-m/easyRFM/archive/master.tar.gz&quot;</span><span class="p">,</span>
         <span class="s">&quot;easyRFM.tar.gz&quot;</span><span class="p">)</span>
install.packages<span class="p">(</span><span class="s">&quot;easyRFM.tar.gz&quot;</span><span class="p">,</span> repos <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> type <span class="o">=</span> <span class="s">&quot;source&quot;</span><span class="p">)</span>


<span class="c1">#Cách 2</span>
<span class="kn">library</span><span class="p">(</span>httr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>devtools<span class="p">)</span>

<span class="c1">#Sửa lại proxy</span>
httr<span class="o">::</span>set_config<span class="p">(</span>httr<span class="o">::</span>use_proxy<span class="p">(</span><span class="s">&quot;10.36.22.22:8080&quot;</span><span class="p">))</span>
<span class="c1">#Install như bình thường</span>
devtools<span class="o">::</span>install_github<span class="p">(</span><span class="s">&quot;rstats-db/odbc&quot;</span><span class="p">)</span>
<span class="c1"># Reset proxy</span>
httr<span class="o">::</span>reset_config<span class="p">()</span>
</pre></div>
</div>
<p><strong>Tạo hàm download qua github</strong></p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>install_github_proxy <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>repos<span class="p">){</span>
  <span class="kn">require</span><span class="p">(</span>stringr<span class="p">)</span>
  <span class="kn">require</span><span class="p">(</span>dplyr<span class="p">)</span>
  <span class="kn">require</span><span class="p">(</span>downloader<span class="p">)</span>

  <span class="c1">#Bước 1: Tạo link và package</span>
  repos_extract <span class="o">&lt;-</span> repos  <span class="o">%&gt;%</span> str_split<span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
  author <span class="o">&lt;-</span> repos_extract<span class="p">[[</span><span class="m">1</span><span class="p">]][</span><span class="m">1</span><span class="p">]</span>
  package <span class="o">&lt;-</span> repos_extract<span class="p">[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span>
  <span class="c1">#Install</span>
  link_github <span class="o">&lt;-</span> <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;https://github.com/&quot;</span><span class="p">,</span> repos<span class="p">,</span> <span class="s">&quot;/archive/master.tar.gz&quot;</span><span class="p">)</span>
  package <span class="o">&lt;-</span> <span class="kp">paste0</span><span class="p">(</span>package<span class="p">,</span> <span class="s">&quot;.tar.gz&quot;</span><span class="p">)</span>
  <span class="c1">#Download</span>
  download<span class="p">(</span>link_github<span class="p">,</span> package<span class="p">)</span>
  install.packages<span class="p">(</span>package<span class="p">,</span> repos <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> type <span class="o">=</span> <span class="s">&quot;source&quot;</span><span class="p">)</span>

  <span class="c1">#Bước 3: Xóa file tar</span>
  <span class="kr">if</span> <span class="p">(</span><span class="kp">file.exists</span><span class="p">(</span>package<span class="p">)){</span><span class="kp">file.remove</span><span class="p">(</span>package<span class="p">)}</span>
<span class="p">}</span>

install_github_proxy<span class="p">(</span><span class="s">&quot;ramnathv/slidifyLibraries&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="kiem-tra-cac-file-chua-trong-1-folder">
<h2>13.15. Kiểm tra các file chứa trong 1 folder<a class="headerlink" href="#kiem-tra-cac-file-chua-trong-1-folder" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Danh sách các file: list.files()</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>purrr<span class="p">)</span>
<span class="kp">list.files</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##   [1] &quot;-Admin.Rhistory&quot;</span>
<span class="c1">##   [2] &quot;_book&quot;</span>
<span class="c1">##   [3] &quot;_bookdown.yml&quot;</span>
<span class="c1">##   [4] &quot;_bookdown_files&quot;</span>
<span class="c1">##   [5] &quot;_output.yml&quot;</span>
<span class="c1">##   [6] &quot;01-data-science-r-book_files&quot;</span>
<span class="c1">##   [7] &quot;01-ds-book-full.Rproj&quot;</span>
<span class="c1">##   [8] &quot;05-cac-chi-so-thong-ke_files&quot;</span>
<span class="c1">##   [9] &quot;06-lap-trinh-ham_files&quot;</span>
<span class="c1">##  [10] &quot;07-lap-trinh-ham-voi-purrr_files&quot;</span>
<span class="c1">##  [11] &quot;40-nguyen-ly-du-bao_files&quot;</span>
<span class="c1">##  [12] &quot;41-mo-hinh-ols_files&quot;</span>
<span class="c1">##  [13] &quot;42-logistic-regression_files&quot;</span>
<span class="c1">##  [14] &quot;43-decision-tree_files&quot;</span>
<span class="c1">##  [15] &quot;44-bagging-boosting_files&quot;</span>
<span class="c1">##  [16] &quot;53-kmeans_files&quot;</span>
<span class="c1">##  [17] &quot;54-basket-analysis_files&quot;</span>
<span class="c1">##  [18] &quot;57-factor-analysis_files&quot;</span>
<span class="c1">##  [19] &quot;60-chuoi-thoi-gian_files&quot;</span>
<span class="c1">##  [20] &quot;61-arima_files&quot;</span>
<span class="c1">##  [21] &quot;61-phan-tich-chuoi-thoi-gian-voi-tidyquant_files&quot;</span>
<span class="c1">##  [22] &quot;67-survival-analysis_files&quot;</span>
<span class="c1">##  [23] &quot;71-casestudy-truc-quan-hoa_files&quot;</span>
<span class="c1">##  [24] &quot;89-meo-trong-r_files&quot;</span>
<span class="c1">##  [25] &quot;book.bib&quot;</span>
<span class="c1">##  [26] &quot;bookdown.rds&quot;</span>
<span class="c1">##  [27] &quot;css&quot;</span>
<span class="c1">##  [28] &quot;data&quot;</span>
<span class="c1">##  [29] &quot;Images&quot;</span>
<span class="c1">##  [30] &quot;index.Rmd&quot;</span>
<span class="c1">##  [31] &quot;krantz.cls&quot;</span>
<span class="c1">##  [32] &quot;latex&quot;</span>
<span class="c1">##  [33] &quot;LICENSE&quot;</span>
<span class="c1">##  [34] &quot;p01-01-gioi-thieu.Rmd&quot;</span>
<span class="c1">##  [35] &quot;p02-03-bien-doi-du-lieu-dplyr.Rmd&quot;</span>
<span class="c1">##  [36] &quot;p02-04-phan-ra-va-xoay-chieu-du-lieu.Rmd&quot;</span>
<span class="c1">##  [37] &quot;p02-05-cac-chi-so-thong-ke.Rmd&quot;</span>
<span class="c1">##  [38] &quot;p02-05-cac-chi-so-thong-ke_files&quot;</span>
<span class="c1">##  [39] &quot;p02-06-lap-trinh-ham.Rmd&quot;</span>
<span class="c1">##  [40] &quot;p02-06-lap-trinh-ham_files&quot;</span>
<span class="c1">##  [41] &quot;p02-07-lap-trinh-ham-voi-purrr.Rmd&quot;</span>
<span class="c1">##  [42] &quot;p02-07-lap-trinh-ham-voi-purrr_files&quot;</span>
<span class="c1">##  [43] &quot;p02-08-bien-doi-du-lieu-text.Rmd&quot;</span>
<span class="c1">##  [44] &quot;p02-11-quan-ly-nhieu-mo-hinh.Rmd&quot;</span>
<span class="c1">##  [45] &quot;p02-15-thong-ke-co-ban.Rmd&quot;</span>
<span class="c1">##  [46] &quot;p02-15-thong-ke-co-ban_files&quot;</span>
<span class="c1">##  [47] &quot;p02-16-power-analysis.Rmd&quot;</span>
<span class="c1">##  [48] &quot;p02-20-sampling-methods.Rmd&quot;</span>
<span class="c1">##  [49] &quot;p02-50-datatable.Rmd&quot;</span>
<span class="c1">##  [50] &quot;p02-60-thu-thap-du-lieu-tu-website.Rmd&quot;</span>
<span class="c1">##  [51] &quot;p02-99-meo-trong-r.Rmd&quot;</span>
<span class="c1">##  [52] &quot;p02-99-meo-trong-r_files&quot;</span>
<span class="c1">##  [53] &quot;p03-01-nguyen-ly-du-bao.Rmd&quot;</span>
<span class="c1">##  [54] &quot;p03-01-nguyen-ly-du-bao_files&quot;</span>
<span class="c1">##  [55] &quot;p03-02-mo-hinh-ols.Rmd&quot;</span>
<span class="c1">##  [56] &quot;p03-02-mo-hinh-ols_files&quot;</span>
<span class="c1">##  [57] &quot;p03-03-logistic-regression.Rmd&quot;</span>
<span class="c1">##  [58] &quot;p03-03-logistic-regression_files&quot;</span>
<span class="c1">##  [59] &quot;p03-04-decision-tree.Rmd&quot;</span>
<span class="c1">##  [60] &quot;p03-04-decision-tree_files&quot;</span>
<span class="c1">##  [61] &quot;p03-05-bagging-boosting.Rmd&quot;</span>
<span class="c1">##  [62] &quot;p03-05-bagging-boosting_files&quot;</span>
<span class="c1">##  [63] &quot;p03-08-svm.Rmd&quot;</span>
<span class="c1">##  [64] &quot;p03-09-feature-engineering.Rmd&quot;</span>
<span class="c1">##  [65] &quot;p03-15-regularization.Rmd&quot;</span>
<span class="c1">##  [66] &quot;p03-15-regularization_files&quot;</span>
<span class="c1">##  [67] &quot;p03-17-nonlinear.Rmd&quot;</span>
<span class="c1">##  [68] &quot;p03-17-nonlinear_files&quot;</span>
<span class="c1">##  [69] &quot;p03-30-credit-scoring.Rmd&quot;</span>
<span class="c1">##  [70] &quot;p03-30-credit-scoring_files&quot;</span>
<span class="c1">##  [71] &quot;p03-35-caret.Rmd&quot;</span>
<span class="c1">##  [72] &quot;p03-35-caret_files&quot;</span>
<span class="c1">##  [73] &quot;p04-01-unsupervised-learning.Rmd&quot;</span>
<span class="c1">##  [74] &quot;p04-02-kmeans.Rmd&quot;</span>
<span class="c1">##  [75] &quot;p04-02-kmeans_files&quot;</span>
<span class="c1">##  [76] &quot;p04-03-hierarchical-clustering.Rmd&quot;</span>
<span class="c1">##  [77] &quot;p04-03-hierarchical-clustering_files&quot;</span>
<span class="c1">##  [78] &quot;p04-04-basket-analysis.Rmd&quot;</span>
<span class="c1">##  [79] &quot;p04-04-basket-analysis_files&quot;</span>
<span class="c1">##  [80] &quot;p04-05-pca.Rmd&quot;</span>
<span class="c1">##  [81] &quot;p04-05-pca_files&quot;</span>
<span class="c1">##  [82] &quot;p04-06-factor-analysis.Rmd&quot;</span>
<span class="c1">##  [83] &quot;p04-06-factor-analysis_files&quot;</span>
<span class="c1">##  [84] &quot;p05-01-chuoi-thoi-gian.Rmd&quot;</span>
<span class="c1">##  [85] &quot;p05-01-chuoi-thoi-gian_files&quot;</span>
<span class="c1">##  [86] &quot;p05-02-arima.Rmd&quot;</span>
<span class="c1">##  [87] &quot;p05-02-arima_files&quot;</span>
<span class="c1">##  [88] &quot;p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant.Rmd&quot;</span>
<span class="c1">##  [89] &quot;p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant_files&quot;</span>
<span class="c1">##  [90] &quot;p05-06-du-bao-ts-voi-prophet.Rmd&quot;</span>
<span class="c1">##  [91] &quot;p05-06-du-bao-ts-voi-prophet_files&quot;</span>
<span class="c1">##  [92] &quot;p05-07-du-bao-ts-voi-timetk.Rmd&quot;</span>
<span class="c1">##  [93] &quot;p05-07-du-bao-ts-voi-timetk_files&quot;</span>
<span class="c1">##  [94] &quot;p05-08-abnomaly-detection.Rmd&quot;</span>
<span class="c1">##  [95] &quot;p05-08-abnomaly-detection_files&quot;</span>
<span class="c1">##  [96] &quot;p06-01-nlp-co-ban.Rmd&quot;</span>
<span class="c1">##  [97] &quot;p06-01-nlp-co-ban_files&quot;</span>
<span class="c1">##  [98] &quot;p06-04-text-classification.Rmd&quot;</span>
<span class="c1">##  [99] &quot;p06-07-nlp-api.Rmd&quot;</span>
<span class="c1">## [100] &quot;p06-10-ocr-tesseract.Rmd&quot;</span>
<span class="c1">## [101] &quot;p07-01-survival-analysis.Rmd&quot;</span>
<span class="c1">## [102] &quot;p07-01-survival-analysis_files&quot;</span>
<span class="c1">## [103] &quot;p07-02-causal-impact.Rmd&quot;</span>
<span class="c1">## [104] &quot;p07-02-causal-impact_files&quot;</span>
<span class="c1">## [105] &quot;p07-03-collaborative-filtering.Rmd&quot;</span>
<span class="c1">## [106] &quot;p07-07-spatial-data.Rmd&quot;</span>
<span class="c1">## [107] &quot;p07-07-spatial-data_files&quot;</span>
<span class="c1">## [108] &quot;p07-10-shiny.Rmd&quot;</span>
<span class="c1">## [109] &quot;p09-01-gioi-thieu-deep-learning.Rmd&quot;</span>
<span class="c1">## [110] &quot;p09-02-co-ban-kien-thuc-toan.Rmd&quot;</span>
<span class="c1">## [111] &quot;p09-02-co-ban-kien-thuc-toan_files&quot;</span>
<span class="c1">## [112] &quot;p09-03-mo-hinh-deep-learning-co-ban.Rmd&quot;</span>
<span class="c1">## [113] &quot;p09-03-mo-hinh-deep-learning-co-ban_files&quot;</span>
<span class="c1">## [114] &quot;p09-04-convolution-neural-network.Rmd&quot;</span>
<span class="c1">## [115] &quot;p10-01-cai-dat-rstudio-server-tren-amazon.Rmd&quot;</span>
<span class="c1">## [116] &quot;p10-03-web-service-azure.Rmd&quot;</span>
<span class="c1">## [117] &quot;p10-09-apis-voi-plumber.Rmd&quot;</span>
<span class="c1">## [118] &quot;p11-01-git.Rmd&quot;</span>
<span class="c1">## [119] &quot;p11-02-cmd.Rmd&quot;</span>
<span class="c1">## [120] &quot;p11-03-docker.Rmd&quot;</span>
<span class="c1">## [121] &quot;p11-04-apis.Rmd&quot;</span>
<span class="c1">## [122] &quot;p11-09-other.Rmd&quot;</span>
<span class="c1">## [123] &quot;p13-01-casestudy-truc-quan-hoa.Rmd&quot;</span>
<span class="c1">## [124] &quot;p13-01-casestudy-truc-quan-hoa_files&quot;</span>
<span class="c1">## [125] &quot;packages.bib&quot;</span>
<span class="c1">## [126] &quot;preamble.tex&quot;</span>
<span class="c1">## [127] &quot;README.md&quot;</span>
<span class="c1">## [128] &quot;render1954659e6e97.rds&quot;</span>
<span class="c1">## [129] &quot;render4204101c52ae.rds&quot;</span>
<span class="c1">## [130] &quot;render6a4dd0696e.rds&quot;</span>
<span class="c1">## [131] &quot;sphinx-book&quot;</span>
</pre></div>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Danh sách các file</span>
my_file <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>file <span class="o">=</span> <span class="kp">list.files</span><span class="p">())</span>

<span class="c1">#Map thêm thời gian mởi file</span>
df <span class="o">&lt;-</span> <span class="kp">as.character</span><span class="p">(</span>my_file<span class="o">$</span><span class="kp">file</span><span class="p">)</span> <span class="o">%&gt;%</span>
  map_df<span class="p">(</span><span class="kp">file.info</span><span class="p">)</span> <span class="o">%&gt;%</span>
  select<span class="p">(</span>mtime<span class="p">)</span>
my_file<span class="o">$</span>mtime <span class="o">&lt;-</span> df<span class="o">$</span>mtime

<span class="c1">#Separate theo định dạng cấu trúc</span>
my_file <span class="o">&lt;-</span> my_file <span class="o">%&gt;%</span>
  tidyr<span class="o">::</span>separate<span class="p">(</span><span class="kp">file</span><span class="p">,</span>
                  into <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;file_name&quot;</span><span class="p">,</span> <span class="s">&quot;index&quot;</span><span class="p">,</span> <span class="s">&quot;type&quot;</span><span class="p">),</span> remove <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
my_file
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##                                                     file</span>
<span class="c1">## 1                                        -Admin.Rhistory</span>
<span class="c1">## 2                                                  _book</span>
<span class="c1">## 3                                          _bookdown.yml</span>
<span class="c1">## 4                                        _bookdown_files</span>
<span class="c1">## 5                                            _output.yml</span>
<span class="c1">## 6                           01-data-science-r-book_files</span>
<span class="c1">## 7                                  01-ds-book-full.Rproj</span>
<span class="c1">## 8                           05-cac-chi-so-thong-ke_files</span>
<span class="c1">## 9                                 06-lap-trinh-ham_files</span>
<span class="c1">## 10                      07-lap-trinh-ham-voi-purrr_files</span>
<span class="c1">## 11                             40-nguyen-ly-du-bao_files</span>
<span class="c1">## 12                                  41-mo-hinh-ols_files</span>
<span class="c1">## 13                          42-logistic-regression_files</span>
<span class="c1">## 14                                43-decision-tree_files</span>
<span class="c1">## 15                             44-bagging-boosting_files</span>
<span class="c1">## 16                                       53-kmeans_files</span>
<span class="c1">## 17                              54-basket-analysis_files</span>
<span class="c1">## 18                              57-factor-analysis_files</span>
<span class="c1">## 19                              60-chuoi-thoi-gian_files</span>
<span class="c1">## 20                                        61-arima_files</span>
<span class="c1">## 21      61-phan-tich-chuoi-thoi-gian-voi-tidyquant_files</span>
<span class="c1">## 22                            67-survival-analysis_files</span>
<span class="c1">## 23                      71-casestudy-truc-quan-hoa_files</span>
<span class="c1">## 24                                  89-meo-trong-r_files</span>
<span class="c1">## 25                                              book.bib</span>
<span class="c1">## 26                                          bookdown.rds</span>
<span class="c1">## 27                                                   css</span>
<span class="c1">## 28                                                  data</span>
<span class="c1">## 29                                                Images</span>
<span class="c1">## 30                                             index.Rmd</span>
<span class="c1">## 31                                            krantz.cls</span>
<span class="c1">## 32                                                 latex</span>
<span class="c1">## 33                                               LICENSE</span>
<span class="c1">## 34                                 p01-01-gioi-thieu.Rmd</span>
<span class="c1">## 35                     p02-03-bien-doi-du-lieu-dplyr.Rmd</span>
<span class="c1">## 36              p02-04-phan-ra-va-xoay-chieu-du-lieu.Rmd</span>
<span class="c1">## 37                        p02-05-cac-chi-so-thong-ke.Rmd</span>
<span class="c1">## 38                      p02-05-cac-chi-so-thong-ke_files</span>
<span class="c1">## 39                              p02-06-lap-trinh-ham.Rmd</span>
<span class="c1">## 40                            p02-06-lap-trinh-ham_files</span>
<span class="c1">## 41                    p02-07-lap-trinh-ham-voi-purrr.Rmd</span>
<span class="c1">## 42                  p02-07-lap-trinh-ham-voi-purrr_files</span>
<span class="c1">## 43                      p02-08-bien-doi-du-lieu-text.Rmd</span>
<span class="c1">## 44                      p02-11-quan-ly-nhieu-mo-hinh.Rmd</span>
<span class="c1">## 45                            p02-15-thong-ke-co-ban.Rmd</span>
<span class="c1">## 46                          p02-15-thong-ke-co-ban_files</span>
<span class="c1">## 47                             p02-16-power-analysis.Rmd</span>
<span class="c1">## 48                           p02-20-sampling-methods.Rmd</span>
<span class="c1">## 49                                  p02-50-datatable.Rmd</span>
<span class="c1">## 50                p02-60-thu-thap-du-lieu-tu-website.Rmd</span>
<span class="c1">## 51                                p02-99-meo-trong-r.Rmd</span>
<span class="c1">## 52                              p02-99-meo-trong-r_files</span>
<span class="c1">## 53                           p03-01-nguyen-ly-du-bao.Rmd</span>
<span class="c1">## 54                         p03-01-nguyen-ly-du-bao_files</span>
<span class="c1">## 55                                p03-02-mo-hinh-ols.Rmd</span>
<span class="c1">## 56                              p03-02-mo-hinh-ols_files</span>
<span class="c1">## 57                        p03-03-logistic-regression.Rmd</span>
<span class="c1">## 58                      p03-03-logistic-regression_files</span>
<span class="c1">## 59                              p03-04-decision-tree.Rmd</span>
<span class="c1">## 60                            p03-04-decision-tree_files</span>
<span class="c1">## 61                           p03-05-bagging-boosting.Rmd</span>
<span class="c1">## 62                         p03-05-bagging-boosting_files</span>
<span class="c1">## 63                                        p03-08-svm.Rmd</span>
<span class="c1">## 64                        p03-09-feature-engineering.Rmd</span>
<span class="c1">## 65                             p03-15-regularization.Rmd</span>
<span class="c1">## 66                           p03-15-regularization_files</span>
<span class="c1">## 67                                  p03-17-nonlinear.Rmd</span>
<span class="c1">## 68                                p03-17-nonlinear_files</span>
<span class="c1">## 69                             p03-30-credit-scoring.Rmd</span>
<span class="c1">## 70                           p03-30-credit-scoring_files</span>
<span class="c1">## 71                                      p03-35-caret.Rmd</span>
<span class="c1">## 72                                    p03-35-caret_files</span>
<span class="c1">## 73                      p04-01-unsupervised-learning.Rmd</span>
<span class="c1">## 74                                     p04-02-kmeans.Rmd</span>
<span class="c1">## 75                                   p04-02-kmeans_files</span>
<span class="c1">## 76                    p04-03-hierarchical-clustering.Rmd</span>
<span class="c1">## 77                  p04-03-hierarchical-clustering_files</span>
<span class="c1">## 78                            p04-04-basket-analysis.Rmd</span>
<span class="c1">## 79                          p04-04-basket-analysis_files</span>
<span class="c1">## 80                                        p04-05-pca.Rmd</span>
<span class="c1">## 81                                      p04-05-pca_files</span>
<span class="c1">## 82                            p04-06-factor-analysis.Rmd</span>
<span class="c1">## 83                          p04-06-factor-analysis_files</span>
<span class="c1">## 84                            p05-01-chuoi-thoi-gian.Rmd</span>
<span class="c1">## 85                          p05-01-chuoi-thoi-gian_files</span>
<span class="c1">## 86                                      p05-02-arima.Rmd</span>
<span class="c1">## 87                                    p05-02-arima_files</span>
<span class="c1">## 88    p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant.Rmd</span>
<span class="c1">## 89  p05-03-phan-tich-chuoi-thoi-gian-voi-tidyquant_files</span>
<span class="c1">## 90                      p05-06-du-bao-ts-voi-prophet.Rmd</span>
<span class="c1">## 91                    p05-06-du-bao-ts-voi-prophet_files</span>
<span class="c1">## 92                       p05-07-du-bao-ts-voi-timetk.Rmd</span>
<span class="c1">## 93                     p05-07-du-bao-ts-voi-timetk_files</span>
<span class="c1">## 94                         p05-08-abnomaly-detection.Rmd</span>
<span class="c1">## 95                       p05-08-abnomaly-detection_files</span>
<span class="c1">## 96                                 p06-01-nlp-co-ban.Rmd</span>
<span class="c1">## 97                               p06-01-nlp-co-ban_files</span>
<span class="c1">## 98                        p06-04-text-classification.Rmd</span>
<span class="c1">## 99                                    p06-07-nlp-api.Rmd</span>
<span class="c1">## 100                             p06-10-ocr-tesseract.Rmd</span>
<span class="c1">## 101                         p07-01-survival-analysis.Rmd</span>
<span class="c1">## 102                       p07-01-survival-analysis_files</span>
<span class="c1">## 103                             p07-02-causal-impact.Rmd</span>
<span class="c1">## 104                           p07-02-causal-impact_files</span>
<span class="c1">## 105                   p07-03-collaborative-filtering.Rmd</span>
<span class="c1">## 106                              p07-07-spatial-data.Rmd</span>
<span class="c1">## 107                            p07-07-spatial-data_files</span>
<span class="c1">## 108                                     p07-10-shiny.Rmd</span>
<span class="c1">## 109                  p09-01-gioi-thieu-deep-learning.Rmd</span>
<span class="c1">## 110                     p09-02-co-ban-kien-thuc-toan.Rmd</span>
<span class="c1">## 111                   p09-02-co-ban-kien-thuc-toan_files</span>
<span class="c1">## 112              p09-03-mo-hinh-deep-learning-co-ban.Rmd</span>
<span class="c1">## 113            p09-03-mo-hinh-deep-learning-co-ban_files</span>
<span class="c1">## 114                p09-04-convolution-neural-network.Rmd</span>
<span class="c1">## 115        p10-01-cai-dat-rstudio-server-tren-amazon.Rmd</span>
<span class="c1">## 116                         p10-03-web-service-azure.Rmd</span>
<span class="c1">## 117                          p10-09-apis-voi-plumber.Rmd</span>
<span class="c1">## 118                                       p11-01-git.Rmd</span>
<span class="c1">## 119                                       p11-02-cmd.Rmd</span>
<span class="c1">## 120                                    p11-03-docker.Rmd</span>
<span class="c1">## 121                                      p11-04-apis.Rmd</span>
<span class="c1">## 122                                     p11-09-other.Rmd</span>
<span class="c1">## 123                   p13-01-casestudy-truc-quan-hoa.Rmd</span>
<span class="c1">## 124                 p13-01-casestudy-truc-quan-hoa_files</span>
<span class="c1">## 125                                         packages.bib</span>
<span class="c1">## 126                                         preamble.tex</span>
<span class="c1">## 127                                            README.md</span>
<span class="c1">## 128                               render1954659e6e97.rds</span>
<span class="c1">## 129                               render4204101c52ae.rds</span>
<span class="c1">## 130                                 render6a4dd0696e.rds</span>
<span class="c1">## 131                                          sphinx-book</span>
<span class="c1">##              file_name     index           type               mtime</span>
<span class="c1">## 1                          Admin       Rhistory 2019-07-11 07:45:49</span>
<span class="c1">## 2                           book           &lt;NA&gt; 2019-08-01 15:47:05</span>
<span class="c1">## 3                       bookdown            yml 2019-05-25 22:04:00</span>
<span class="c1">## 4                       bookdown          files 2019-08-01 16:28:11</span>
<span class="c1">## 5                         output            yml 2019-07-11 07:45:47</span>
<span class="c1">## 6                   01      data        science 2019-07-15 11:09:15</span>
<span class="c1">## 7                   01        ds           book 2019-08-01 16:09:02</span>
<span class="c1">## 8                   05       cac            chi 2019-07-15 11:09:15</span>
<span class="c1">## 9                   06       lap          trinh 2019-07-15 11:09:15</span>
<span class="c1">## 10                  07       lap          trinh 2019-07-15 11:09:15</span>
<span class="c1">## 11                  40    nguyen             ly 2019-07-15 11:09:15</span>
<span class="c1">## 12                  41        mo           hinh 2019-07-15 11:09:15</span>
<span class="c1">## 13                  42  logistic     regression 2019-07-15 11:09:15</span>
<span class="c1">## 14                  43  decision           tree 2019-07-15 11:09:16</span>
<span class="c1">## 15                  44   bagging       boosting 2019-07-15 11:09:16</span>
<span class="c1">## 16                  53    kmeans          files 2019-07-15 11:09:16</span>
<span class="c1">## 17                  54    basket       analysis 2019-07-15 11:09:16</span>
<span class="c1">## 18                  57    factor       analysis 2019-07-15 11:09:16</span>
<span class="c1">## 19                  60     chuoi           thoi 2019-07-15 11:09:16</span>
<span class="c1">## 20                  61     arima          files 2019-07-15 11:09:16</span>
<span class="c1">## 21                  61      phan           tich 2019-07-15 11:09:16</span>
<span class="c1">## 22                  67  survival       analysis 2019-07-15 11:09:16</span>
<span class="c1">## 23                  71 casestudy           truc 2019-07-15 11:09:17</span>
<span class="c1">## 24                  89       meo          trong 2019-07-15 11:09:17</span>
<span class="c1">## 25                book       bib           &lt;NA&gt; 2018-09-01 15:34:53</span>
<span class="c1">## 26            bookdown       rds           &lt;NA&gt; 2019-08-01 15:47:01</span>
<span class="c1">## 27                 css      &lt;NA&gt;           &lt;NA&gt; 2019-07-15 11:08:58</span>
<span class="c1">## 28                data      &lt;NA&gt;           &lt;NA&gt; 2019-08-01 15:32:27</span>
<span class="c1">## 29              Images      &lt;NA&gt;           &lt;NA&gt; 2019-07-31 08:47:24</span>
<span class="c1">## 30               index       Rmd           &lt;NA&gt; 2019-07-09 12:46:04</span>
<span class="c1">## 31              krantz       cls           &lt;NA&gt; 2018-09-03 22:06:21</span>
<span class="c1">## 32               latex      &lt;NA&gt;           &lt;NA&gt; 2019-07-15 11:08:59</span>
<span class="c1">## 33             LICENSE      &lt;NA&gt;           &lt;NA&gt; 2018-09-01 15:34:53</span>
<span class="c1">## 34                 p01        01           gioi 2019-07-15 09:54:53</span>
<span class="c1">## 35                 p02        03           bien 2019-07-17 09:00:18</span>
<span class="c1">## 36                 p02        04           phan 2019-07-17 09:00:34</span>
<span class="c1">## 37                 p02        05            cac 2019-07-27 15:28:19</span>
<span class="c1">## 38                 p02        05            cac 2019-07-15 11:09:17</span>
<span class="c1">## 39                 p02        06            lap 2019-07-27 15:55:50</span>
<span class="c1">## 40                 p02        06            lap 2019-07-15 11:09:17</span>
<span class="c1">## 41                 p02        07            lap 2019-07-17 09:01:00</span>
<span class="c1">## 42                 p02        07            lap 2019-07-15 11:09:17</span>
<span class="c1">## 43                 p02        08           bien 2019-07-17 09:01:25</span>
<span class="c1">## 44                 p02        11           quan 2019-07-17 09:01:36</span>
<span class="c1">## 45                 p02        15          thong 2019-07-17 09:43:48</span>
<span class="c1">## 46                 p02        15          thong 2019-07-17 09:45:39</span>
<span class="c1">## 47                 p02        16          power 2019-07-17 09:46:38</span>
<span class="c1">## 48                 p02        20       sampling 2019-07-17 09:01:54</span>
<span class="c1">## 49                 p02        50      datatable 2019-07-17 09:02:13</span>
<span class="c1">## 50                 p02        60            thu 2019-07-27 15:24:35</span>
<span class="c1">## 51                 p02        99            meo 2019-08-01 16:27:19</span>
<span class="c1">## 52                 p02        99            meo 2019-07-15 11:09:17</span>
<span class="c1">## 53                 p03        01         nguyen 2019-07-17 09:02:26</span>
<span class="c1">## 54                 p03        01         nguyen 2019-07-15 11:09:17</span>
<span class="c1">## 55                 p03        02             mo 2019-07-19 16:23:43</span>
<span class="c1">## 56                 p03        02             mo 2019-07-15 11:09:17</span>
<span class="c1">## 57                 p03        03       logistic 2019-07-17 09:02:59</span>
<span class="c1">## 58                 p03        03       logistic 2019-07-15 11:09:17</span>
<span class="c1">## 59                 p03        04       decision 2019-07-17 09:03:14</span>
<span class="c1">## 60                 p03        04       decision 2019-07-15 11:09:17</span>
<span class="c1">## 61                 p03        05        bagging 2019-07-17 09:03:23</span>
<span class="c1">## 62                 p03        05        bagging 2019-07-15 11:09:18</span>
<span class="c1">## 63                 p03        08            svm 2019-07-17 09:03:30</span>
<span class="c1">## 64                 p03        09        feature 2019-07-17 09:03:40</span>
<span class="c1">## 65                 p03        15 regularization 2019-07-17 09:03:48</span>
<span class="c1">## 66                 p03        15 regularization 2019-07-15 16:18:13</span>
<span class="c1">## 67                 p03        17      nonlinear 2019-07-17 09:04:02</span>
<span class="c1">## 68                 p03        17      nonlinear 2019-07-17 08:58:01</span>
<span class="c1">## 69                 p03        30         credit 2019-07-17 11:20:20</span>
<span class="c1">## 70                 p03        30         credit 2019-07-17 11:17:34</span>
<span class="c1">## 71                 p03        35          caret 2019-07-19 16:12:17</span>
<span class="c1">## 72                 p03        35          caret 2019-07-19 16:12:53</span>
<span class="c1">## 73                 p04        01   unsupervised 2019-07-17 09:04:10</span>
<span class="c1">## 74                 p04        02         kmeans 2019-07-17 09:04:16</span>
<span class="c1">## 75                 p04        02         kmeans 2019-07-15 11:09:18</span>
<span class="c1">## 76                 p04        03   hierarchical 2019-07-18 14:39:21</span>
<span class="c1">## 77                 p04        03   hierarchical 2019-07-18 14:37:00</span>
<span class="c1">## 78                 p04        04         basket 2019-07-17 09:04:25</span>
<span class="c1">## 79                 p04        04         basket 2019-07-15 11:09:18</span>
<span class="c1">## 80                 p04        05            pca 2019-07-17 09:04:45</span>
<span class="c1">## 81                 p04        05            pca 2019-07-16 17:39:55</span>
<span class="c1">## 82                 p04        06         factor 2019-07-17 09:04:57</span>
<span class="c1">## 83                 p04        06         factor 2019-07-15 11:09:18</span>
<span class="c1">## 84                 p05        01          chuoi 2019-07-17 09:05:04</span>
<span class="c1">## 85                 p05        01          chuoi 2019-07-15 11:09:18</span>
<span class="c1">## 86                 p05        02          arima 2019-07-17 09:05:12</span>
<span class="c1">## 87                 p05        02          arima 2019-07-15 11:09:18</span>
<span class="c1">## 88                 p05        03           phan 2019-07-17 09:05:24</span>
<span class="c1">## 89                 p05        03           phan 2019-07-15 11:09:18</span>
<span class="c1">## 90                 p05        06             du 2019-07-15 15:29:25</span>
<span class="c1">## 91                 p05        06             du 2019-07-15 15:42:20</span>
<span class="c1">## 92                 p05        07             du 2019-07-17 14:16:30</span>
<span class="c1">## 93                 p05        07             du 2019-07-15 15:41:38</span>
<span class="c1">## 94                 p05        08       abnomaly 2019-07-27 11:29:54</span>
<span class="c1">## 95                 p05        08       abnomaly 2019-07-27 11:30:06</span>
<span class="c1">## 96                 p06        01            nlp 2019-07-17 14:16:36</span>
<span class="c1">## 97                 p06        01            nlp 2019-07-17 14:15:20</span>
<span class="c1">## 98                 p06        04           text 2019-07-17 14:54:57</span>
<span class="c1">## 99                 p06        07            nlp 2019-07-17 17:25:03</span>
<span class="c1">## 100                p06        10            ocr 2019-08-01 15:33:56</span>
<span class="c1">## 101                p07        01       survival 2019-07-17 09:05:46</span>
<span class="c1">## 102                p07        01       survival 2019-07-15 11:09:18</span>
<span class="c1">## 103                p07        02         causal 2019-07-17 09:05:57</span>
<span class="c1">## 104                p07        02         causal 2019-07-15 16:06:20</span>
<span class="c1">## 105                p07        03  collaborative 2019-07-17 10:02:58</span>
<span class="c1">## 106                p07        07        spatial 2019-07-18 13:28:32</span>
<span class="c1">## 107                p07        07        spatial 2019-07-18 13:30:09</span>
<span class="c1">## 108                p07        10          shiny 2019-07-20 10:22:29</span>
<span class="c1">## 109                p09        01           gioi 2019-07-31 12:53:19</span>
<span class="c1">## 110                p09        02             co 2019-08-01 10:08:49</span>
<span class="c1">## 111                p09        02             co 2019-07-31 10:29:46</span>
<span class="c1">## 112                p09        03             mo 2019-08-01 15:43:51</span>
<span class="c1">## 113                p09        03             mo 2019-08-01 10:06:08</span>
<span class="c1">## 114                p09        04    convolution 2019-08-01 13:55:25</span>
<span class="c1">## 115                p10        01            cai 2019-07-17 22:08:17</span>
<span class="c1">## 116                p10        03            web 2019-07-17 18:28:37</span>
<span class="c1">## 117                p10        09           apis 2019-07-20 10:24:15</span>
<span class="c1">## 118                p11        01            git 2019-07-24 08:13:34</span>
<span class="c1">## 119                p11        02            cmd 2019-08-01 16:27:45</span>
<span class="c1">## 120                p11        03         docker 2019-07-19 16:02:25</span>
<span class="c1">## 121                p11        04           apis 2019-07-20 08:56:18</span>
<span class="c1">## 122                p11        09          other 2019-08-01 16:27:10</span>
<span class="c1">## 123                p13        01      casestudy 2019-07-17 09:06:04</span>
<span class="c1">## 124                p13        01      casestudy 2019-07-15 11:09:18</span>
<span class="c1">## 125           packages       bib           &lt;NA&gt; 2019-05-27 17:24:52</span>
<span class="c1">## 126           preamble       tex           &lt;NA&gt; 2019-05-25 21:39:16</span>
<span class="c1">## 127             README        md           &lt;NA&gt; 2019-05-26 17:33:25</span>
<span class="c1">## 128 render1954659e6e97       rds           &lt;NA&gt; 2019-08-01 16:28:11</span>
<span class="c1">## 129 render4204101c52ae       rds           &lt;NA&gt; 2019-07-09 11:41:10</span>
<span class="c1">## 130   render6a4dd0696e       rds           &lt;NA&gt; 2019-07-11 17:45:58</span>
<span class="c1">## 131             sphinx      book           &lt;NA&gt;                &lt;NA&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="load-tat-ca-dataframe-trong-1-thu-muc">
<h2>13.16. Load tất cả dataframe trong 1 thư mục<a class="headerlink" href="#load-tat-ca-dataframe-trong-1-thu-muc" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kp">getwd</span><span class="p">()</span>
<span class="kp">list.files</span><span class="p">(</span><span class="s">&quot;F:/OneDrive - VPBank/1. Personal projects/Trick in R&quot;</span><span class="p">)</span>
<span class="kp">sapply</span><span class="p">(</span><span class="kp">list.files</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;*.rda&quot;</span><span class="p">),</span> <span class="kp">load</span><span class="p">,</span> <span class="m">.</span>GlobalEnv<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="gan-mot-dataframe-vao-1-bien">
<h2>13.17. Gán một dataframe vào 1 biến<a class="headerlink" href="#gan-mot-dataframe-vao-1-bien" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>result_name <span class="o">&lt;-</span> <span class="s">&quot;df2&quot;</span>
<span class="kp">assign</span><span class="p">(</span>result_name<span class="p">,</span> mtcars<span class="p">,</span> envir <span class="o">=</span> <span class="m">.</span>GlobalEnv<span class="p">)</span>
<span class="kp">head</span><span class="p">(</span>df2<span class="p">)</span>
</pre></div>
</div>
<p><strong>Lưu ý</strong>: Options <code class="docutils literal notranslate"><span class="pre">envir</span> <span class="pre">=</span> <span class="pre">.GlobalEnv</span></code> rất hữu ích khi gán dataframe
vào biến và load trong global environment trong hàm</p>
</div>
<div class="section" id="goi-mot-dataframe-tu-bien">
<h2>13.18. Gọi một dataframe từ biến<a class="headerlink" href="#goi-mot-dataframe-tu-bien" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>x <span class="o">&lt;-</span> <span class="s">&quot;mtcars&quot;</span>
<span class="kp">get</span><span class="p">(</span>x<span class="p">)</span>
<span class="c1">#Lưu dạng dataframe</span>
<span class="kp">save</span><span class="p">(</span><span class="kt">list</span> <span class="o">=</span> x<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span>x<span class="p">,</span><span class="s">&quot;.rda&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="rbind-tat-ca-cac-dataframe">
<h2>13.19. Rbind tất cả các dataframe<a class="headerlink" href="#rbind-tat-ca-cac-dataframe" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Nối thành 1 sách</span>
<span class="kp">rm</span><span class="p">(</span><span class="kt">list</span> <span class="o">=</span> <span class="kp">ls</span><span class="p">())</span>
df1 <span class="o">&lt;-</span> df2 <span class="o">&lt;-</span> df3 <span class="o">&lt;-</span> iris
dfs <span class="o">&lt;-</span>  <span class="kp">sapply</span><span class="p">(</span><span class="m">.</span>GlobalEnv<span class="p">,</span> <span class="kp">is.data.frame</span><span class="p">)</span>
data <span class="o">&lt;-</span> <span class="kp">do.call</span><span class="p">(</span><span class="kp">rbind</span><span class="p">,</span> <span class="kp">mget</span><span class="p">(</span><span class="kp">names</span><span class="p">(</span>dfs<span class="p">)[</span>dfs<span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-tat-ca-tru-1-file">
<h2>13.20. Remove tất cả trừ 1 file<a class="headerlink" href="#remove-tat-ca-tru-1-file" title="Permalink to this headline">¶</a></h2>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kp">rm</span><span class="p">(</span><span class="kt">list</span> <span class="o">=</span> <span class="kp">setdiff</span><span class="p">(</span><span class="kp">ls</span><span class="p">(),</span> <span class="s">&quot;data&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="xem-location-cua-file-script-dang-mo">
<h2>13.21. Xem location của file script đang mở<a class="headerlink" href="#xem-location-cua-file-script-dang-mo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Vấn đề: Khi thực hiện tự động hóa trong R, ta cần đặt directory tự
động (không mở bằng project)</li>
<li>Giải pháp: Sử dụng rstudioapi</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kp">dirname</span><span class="p">(</span>rstudioapi<span class="o">::</span>getSourceEditorContext<span class="p">()</span><span class="o">$</span>path<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="chay-mot-doan-r-tu-bat">
<h2>13.22. Chạy một đoạn R từ bat<a class="headerlink" href="#chay-mot-doan-r-tu-bat" title="Permalink to this headline">¶</a></h2>
<p>Tương tự như Python, R cho phép chạy thẳng code từ <code class="docutils literal notranslate"><span class="pre">bat</span></code>. Các bước thự
hiện như sau:</p>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">RScript</span></code> vào <code class="docutils literal notranslate"><span class="pre">Global</span> <span class="pre">Path</span></code>:<ul>
<li><code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">Advanced</span> <span class="pre">System</span> <span class="pre">Setting</span></code> &gt;&gt; <code class="docutils literal notranslate"><span class="pre">Advanced</span></code> &gt;&gt;
<code class="docutils literal notranslate"><span class="pre">Environment</span> <span class="pre">Variables</span></code> &gt;&gt; <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">variables</span></code> &gt;&gt; <code class="docutils literal notranslate"><span class="pre">Path</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">New</span></code> &gt;&gt; Chọn đường dẫn vào R &gt;&gt;
<code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\R\R-3.4.0\bin</span></code></li>
</ul>
</li>
<li>Kiểm tra setup trong bat: <code class="docutils literal notranslate"><span class="pre">RScript</span> <span class="pre">--version</span></code></li>
<li>Thực hiện câu lệnh:</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span>RScript <span class="o">-</span>e <span class="s">&quot;bookdown::preview_chapter(&#39;chapter-01.Rmd&#39;)&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tu-dong-render-ra-ket-qua-phan-tich">
<h2>13.23. Tự động render ra kết quả phân tích<a class="headerlink" href="#tu-dong-render-ra-ket-qua-phan-tich" title="Permalink to this headline">¶</a></h2>
<p><strong>Lưu ý</strong>:</p>
<ul class="simple">
<li>Cần có hai dấu cách (space) trước <code class="docutils literal notranslate"><span class="pre">\n</span></code></li>
<li>Đặt chế độ <code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">'asis'</span></code> để biến text thành kết quả</li>
</ul>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>```{r result = &#39;asis&#39;}
for(i in unique(Month)) {
  cat(&quot;  \n###&quot;,  month.name[i], &quot;Air Quaility  \n&quot;)
  #print(plot(airquality[airquality$Month == i,]))
  plot(airquality[airquality$Month == i,])
  cat(&quot;  \n&quot;)
}
```
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="p03-01-nguyen-ly-du-bao.html" class="btn btn-neutral float-right" title="1. Các nguyên lý dự báo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="p02-60-thu-thap-du-lieu-tu-website.html" class="btn btn-neutral float-left" title="12. Thu thập dữ liệu từ website" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Anh Hoang Duc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>